<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.nyerk.xyz/viewtopic.php?f=15&t=170&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 May 2018 09:43:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>Nyerk &bull; Sorcerer.lua for NA *Update*</title>

<link href="styles/we_universal/theme/print.html" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>Nyerk</h1>
		<p>An Forum about Aion<br /><a href="index.html">https://www.nyerk.xyz/</a></p>

		<h2>Sorcerer.lua for NA *Update*</h2>
		<p><a href="viewtopic367a.html?f=15&amp;t=170">https://www.nyerk.xyz/viewtopic.php?f=15&amp;t=170</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Sorcerer.lua for NA *Update*</h3>
				<div class="date">Posted: <strong>Sat May 27, 2017 11:53 am</strong></div>
				<div class="author">by <strong>kirathegod</strong></div>
				<div class="content">*Update* <br>
More skills and now use FW on short range <br>
<br>
<br>
i have made a few changes to the lua posted here add some missing skills changed few names duno if the sleep work but changed it to curse of roots didnt wanted to get the scrolls and potions work because i didnt think it needed with just resting every now and then it can bot for hours specialy in exp event :3<br>
with time i will learn more and tweak a little bit more for now that all i can think about btw my main i s sorc so sorc all the way <br>
<br>
btw in illuma sometime when boting for loong period there apear archons that are like elites those motherfuckers duno if it some anty bot sistem or dont know but beware still this scrip is capable of how them but if there is more than one mob duno if will survie i need to look into it in the future for now here is is not my work just tweaked it for na <br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--[[

--------------------------------------------------
Copyright (C) 2011 Blastradius, macrokor, rellis

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
--------------------------------------------------

]]--
--[[

--------------------------------------------------
Copyright (C) 2013 Smithme08

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
--------------------------------------------------

]]--

-- Priority list of items to use (first item used first/most important) with conditions. However, since the conditions check health, mana, etc, its possible that you will use lower level potions first.
-- If you really prefer to ONLY use the higher level potions, use -- to comment out all the others, OR set the health/mana/etc condition compare_value to higher for lower potions so they still get used in case you
-- run out of the better ones.
local m_items_to_use =
{
{ item_name = "Major Divine Life Serum", cooldown_type = "Divine Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "3680" } } },
{ item_name = "Major Divine Mana Serum", cooldown_type = "Divine Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "3450" } } },
{ item_name = "Superior Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "2270" } } },
{ item_name = "Superior Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1800" } } },
{ item_name = "Superior Life Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "2270" } } },
{ item_name = "Superior Mana Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1800" } } },
{ item_name = "Superior Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "2120" } } },
{ item_name = "Superior Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1830" } } },
{ item_name = "Greater Divine Life Serum", cooldown_type = "Divine Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "2250" } } },
{ item_name = "Greater Divine Mana Serum", cooldown_type = "Divine Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "2350" } } },
{ item_name = "Fine Panacea of Life", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1550" } } },
{ item_name = "Fine Panacea of Mana", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1340" } } },
{ item_name = "Fine Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1940" } } },
{ item_name = "Fine Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1680" } } },
{ item_name = "Fine Life Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1940" } } },
{ item_name = "Fine Mana Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1680" } } },
{ item_name = "[Abbey] Fine Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "154" } } },
{ item_name = "[Abbey] Fine Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "160" } } },
{ item_name = "Fine Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "2120" } } },
{ item_name = "Fine Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1830" } } },
{ item_name = "Fine Life Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "2120" } } },
{ item_name = "Fine Mana Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1830" } } },
{ item_name = "Divine Life Serum", cooldown_type = "Divine Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1860" } } },
{ item_name = "Divine Mana Serum", cooldown_type = "Divine Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "2170" } } },
{ item_name = "Major Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1540" } } },
{ item_name = "Major Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1600" } } },
{ item_name = "Major Life Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1540" } } },
{ item_name = "Major Mana Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1600" } } },
{ item_name = "Lesser Divine Life Serum", cooldown_type = "Divine Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1430" } } },
{ item_name = "Lesser Divine Mana Serum", cooldown_type = "Divine Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1870" } } },
{ item_name = "Major Panacea of Life", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1130" } } },
{ item_name = "Major Panacea of Mana", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1180" } } },
{ item_name = "Major Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1410" } } },
{ item_name = "Major Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1470" } } },
{ item_name = "Major Life Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1410" } } },
{ item_name = "Major Mana Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1470" } } },
{ item_name = "Greater Panacea of Life", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "930" } } },
{ item_name = "Greater Panacea of Mana", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1090" } } },
{ item_name = "Greater Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1160" } } },
{ item_name = "Greater Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1360" } } },
{ item_name = "Greater Life Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1160" } } },
{ item_name = "Greater Mana Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1360" } } },
{ item_name = "Greater Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1270" } } },
{ item_name = "Greater Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1480" } } },
{ item_name = "Greater Life Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "1270" } } },
{ item_name = "Greater Mana Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1480" } } },
{ item_name = "Panacea of Life", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "720" } } },
{ item_name = "Panacea of Mana", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "940" } } },
{ item_name = "Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "890" } } },
{ item_name = "Recovery Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1170" } } },
{ item_name = "Life Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "890" } } },
{ item_name = "Mana Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1170" } } },
{ item_name = "Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "970" } } },
{ item_name = "Recovery Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1280" } } },
{ item_name = "Life Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "970" } } },
{ item_name = "Mana Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "1280" } } },
{ item_name = "Lesser Panacea of Life", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "490" } } },
{ item_name = "Lesser Panacea of Mana", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "720" } } },
{ item_name = "Lesser Life Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "610" } } },
{ item_name = "Lesser Mana Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "900" } } },
{ item_name = "Lesser Life Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "670" } } },
{ item_name = "Lesser Mana Potion", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "980" } } },
{ item_name = "Minor Panacea of Life", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "270" } } },
{ item_name = "Minor Panacea of Mana", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "440" } } },
{ item_name = "Minor Life Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "340" } } },
{ item_name = "Minor Mana Serum", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "540" } } },
{ item_name = "Minor Life Elixir", cooldown_type = "Potion", conditions = { { condition_type = "Player_Health_Needed", compare = "&gt;=", compare_value = "310" } } },
{ item_name = "Minor Mana Elixir", cooldown_type = "Potion", conditions = { { condition_type = "Player_Mana_Needed", compare = "&gt;=", compare_value = "500" } } }
};

-- Cooldown time for item types, in seconds
local m_cooldown_per_item_type =
{
["Potion"] = 60,
["Divine Potion"] = 300,
["Food"] = nil,
["Drink"] = nil,
["Scroll"] = nil
};

-- Not sure yet whether I will use this....the idea that the cooldown is not actually how often you want to reuse something, like food and drink and scrolls
local m_reuse_time_per_item_type =
{
["Food_Very_Short"] = nil,
["Food_Short"] = nil,
["Food_Long"] = nil,
["Drink_Very_Short"] = nil,
["Drink_Short"] = nil,
["Drink_Long"] = nil
};

-- The actual time, in miliseconds, when the cool down for a certain type of item, since I don't trust Aion and AS regarding Cool Downs sometimes when its between different items etc
-- Had problems with that regarding skills sometimes, he he he. So I manage it myself here.
local m_cooldown_end_timestamps =
{
["Potion"] = nil,
["Divine Potion"] = nil,
["Food"] = nil,
["Drink"] = nil,
["Scroll"] = nil
};

-----Sleep second target
function CountMobs( arg_target, Distance )

local i = 0;

-- Iterate through all entities
for ID, Entity in DictionaryIterator( EntityList:GetList()) do
-- Check if the entiy is valid.
if Entity ~= nil then
-- Retrieve the entity state.
local EntityState = Entity:GetState();
-- Check if the entity state is valid.
if EntityState ~= nil then
-- Check if this is a living monster that is in range.
if Entity:IsMonster() and not Entity:IsDead() and Entity:IsHostile() and EntityTarget:GetPosition():DistanceToPosition( Entity:GetPosition()) &lt;= Distance then
-- Check if this entity is sleeping
if EntityState:GetState( Helper:CheckName( "Curse of Roots" )) ~= nil then
return 0;
-- Increment the number.
else
i = i + 1;
end
end
end
end
end

return i;

end

function SleepMultipleAttacker( EntityTarget, AttackRange )
-- Check if we have stored a target.
if self._SleepTarget ~= nil then
-- Check if the current target is the stored target.
if self._SleepTarget:GetID() == Player:GetTargetID() then
-- Check if Sleep Arrow is available.
if Helper:CheckAvailable( "Curse of Roots" ) then
-- Shoot the Sleep Arrow.
Helper:CheckExecute( "Curse of Roots" );
-- Indicate we cannot continue attacking.
return false;
else
-- Set the target.
Player:SetTarget( self._SleepTargetRestore );
-- Indicate we cannot continue attacking.
return false;
end
-- Check if the current target is the original target.
elseif not Helper:CheckAvailable( "Curse of Roots" ) and self._SleepTargetRestore:GetID() == EntityTarget:GetID() then
-- Clear the sleep target.
self._SleepTarget = nil;
-- Indicate we cannot continue attacking.
return true;
else
-- Set the target.
Player:SetTarget( self._SleepTarget );
-- Indicate we cannot continue attacking.
return false;
end
end
-- Check if Sleep Arrow is available.
if Helper:CheckAvailable( "Curse of Roots" ) then
-- Loop through the entities.
for ID, Entity in DictionaryIterator( EntityList:GetList()) do
-- Check if this entity is a monster, is not friendly and decided to attack me (and obviously is not my current target).
if not Entity:IsDead() and Entity:IsMonster() and not Entity:IsFriendly() and Entity:GetTargetID() == Player:GetID() and Entity:GetID() ~= EntityTarget:GetID() then
-- Check if the entity that is attacking us is within range.
if Entity:GetPosition():DistanceToPosition( Player:GetPosition()) &lt;= AttackRange then
-- Store the sleep target.
self._SleepTarget = Entity;
-- Store the restore target.
self._SleepTargetRestore = EntityTarget;
-- Set the target.
Player:SetTarget( Entity );
-- Indicate we cannot continue attacking.
return false;
end
end
end
end
-- Indicate we can continue attacking.
return true;
end

-- This is the class chain information list. It is NOT a priority list, this is merely to help the class know when it has
-- started a chain so it knows to only use skills from that chain until the target dies OR until the chain times out.
local m_chain_info =
{

["Flame Bolt"] = { "Flame Bolt", "Blaze", "Conflagration" },
["Ice Chain"] = { "Ice Chain", "Frozen Shock" },
["Remove Shock"] = { "Remove Shock", "Curse of Old Roots" }
};

-- Buffs you want to apply before starting an attack or while traveling.
local m_pre_attack_buffs =
{
{ skill_name = "Robe of Flame", conditions = { { condition_type = "Buff_Not_Active" } } },
{ skill_name = "Stone Skin", conditions = { { condition_type = "Buff_Not_Active" } } }
};

-- Buffs or self-skills you want to use in the middle of battle
local m_attack_buffs =
{
{ skill_name = "Robe of Flame", conditions = { { condition_type = "Buff_Not_Active" } } },
{ skill_name = "Vaizel's Wisdom", conditions = { { condition_type = "Buff_Not_Active" } } },
{ skill_name = "Magic Assist", conditions = { { condition_type = "Buff_Not_Active" } } },
{ skill_name = "Supplication of Focus", conditions = { { condition_type = "Buff_Not_Active" } } },
{ skill_name = "Stone Skin", conditions = { { condition_type = "Buff_Not_Active" } } }
---{ skill_name = "Zikel's Wisdom", conditions = { { condition_type = "Buff_Not_Active" } } },
---{ skill_name = "Explosion of Rage", conditions = { { condition_type = "Buff_Not_Active" }, { condition_type = "Player_DP", compare = "&gt;=", compare_value = "2000" } } }
};

-- Skills you want to use to START an attack. I do not recommend chain skills here since there is too long of a delay in AS between attacks at this point for some reason and they tend to time-out
local m_pull_skills =
{
{ skill_name = "Delayed Blast", conditions = { { condition_type = "arg_range", compare = "&gt;=", compare_value = "5" } } },
{ skill_name = "Ice Chain", conditions = { { condition_type = "arg_range", compare = "&gt;=", compare_value = "5" } } },
{ skill_name = "Soul Freeze" },
{ skill_name = "Attack/Chat" }
};

-- Conditional skills are priority skills which rely on special conditions that usually need to be responded to no matter what (like Remove Shock...if its available you probably need it NOW  )
local m_conditional_skills =
{
{ skill_name = "Stamina Absorption", conditions = { { condition_type = "Player_Health_Percent", compare = "&lt;", compare_value = "70" } }, break_chain = true },
{ skill_name = "Boon of Iron-Clad", conditions = { { condition_type = "Player_Health_Percent", compare = "&lt;", compare_value = "60" } }, break_chain = true },
{ skill_name = "Transformation: Vessel of Earth", conditions = { { condition_type = "Player_Health_Percent", compare = "&lt;=", compare_value = "45" } }, break_chain = true },
{ skill_name = "Mana Font", conditions = { { condition_type = "Player_Mana_Percent", compare = "&lt;", compare_value = "40" } }, break_chain = true },
{ skill_name = "Remove Shock", break_chain = true },
{ skill_name = "Freezing Wind", conditions = { { condition_type = "arg_range", compare = "&lt;=", compare_value = "3" } } }
};

-- You MUST list the skills from LAST in chain to first for them to fire properly (Aion reports earlier skills as off CD even if you've moved to next step in chain)
local m_chain_skills =
{
{ skill_name = "Blaze" },
{ skill_name = "Conflagration" },
{ skill_name = "Frozen Shock" }
};

-- Skills to use during normal attack (not pull, not chain, just attacking)
local l_attack_skills =
{
---{ skill_name = "Counter Leech", conditions = { { condition_type = "Player_Mana_Percent", compare = "&lt;", compare_value = "60" } } },
{ skill_name = "Soul Absorption", conditions = { { condition_type = "Player_Mana_Percent", compare = "&lt;=", compare_value = "70" } } },
---{ skill_name = "Absorb Energy", conditions = { { condition_type = "Player_Mana_Percent", compare = "&lt;", compare_value = "85" } } },
{ skill_name = "Refracting Shard", conditions = { { condition_type = "Player_Mana_Percent", compare = "&lt;", compare_value = "70" } } },
{ skill_name = "Stamina Absorption", conditions = { { condition_type = "Player_Health_Percent", compare = "&lt;", compare_value = "50" } } },
{ skill_name = "Vaizel's Wisdom", conditions = { { condition_type = "Skill_On_Cooldown", compare = "=", compare_value = "Delayed Blast" } } },
{ skill_name = "Delayed Blast", conditions = { { condition_type = "arg_range", compare = "&gt;=", compare_value = "5" } } },
{ skill_name = "Freeze" },
{ skill_name = "Wind Cut Down" },
{ skill_name = "Arcane Thunderbolt" },
{ skill_name = "Glacial Shard", conditions = { { condition_type = "Target_Health_Percent", compare = "&gt;", compare_value = "20" } } },
{ skill_name = "Storm Strike", conditions = { { condition_type = "Target_Health_Percent", compare = "&gt;", compare_value = "20" } } },
{ skill_name = "Flame Fusion" },
{ skill_name = "Aetherflame", conditions = { { condition_type = "Target_Health_Percent", compare = "&gt;", compare_value = "20" } } },
{ skill_name = "Flame Spray", conditions = { { condition_type = "Target_Health_Percent", compare = "&gt;", compare_value = "20" } } },
{ skill_name = "Flame Cage" },
{ skill_name = "Freeze" },
{ skill_name = "Soul Freeze" },
{ skill_name = "Ice Harpoon" },
{ skill_name = "Flame Harpoon" },
{ skill_name = "Aether's Hold" },
{ skill_name = "Aether Flame" },
{ skill_name = "Magic Fist" },
{ skill_name = "Spear of Gust" },
{ skill_name = "Attack/Chat" }
};

-- Flag telling us when we are mid-chain
local m_doing_chain_skills = false;
-- Time to add to "now" to wait for another chain skill to successfully fire before giving up
local m_chain_timeout_interval = 1500;
-- Literal time in milliseconds of time when we should give up on current chain of skills
local m_chain_timeout_time = 0;
-- Index into the list of skills for last chain skill used
local m_chain_index = -1;
-- Holds the list of chain skills
local m_current_chain = nil;
-- Skill name of start of current chain
local m_chain_start_skill = nil;

-- Current target for attack, used to know if we are mid-fight or starting a pull
local m_target = nil;
-- Reset all the chain related variables, used when we either killed a target or a chain timed out.
function _reset_chain_variables()
-- Flag telling us when we are mid-chain
m_doing_chain_skills = false;
-- Timeout to give up on a chain to avoid getting stuck
m_chain_timeout_time = 0;
-- Index into the list of skills for last chain skill used
m_chain_index = -1;
-- Holds the list of chain skills
m_current_chain = nil;
-- Skill name of start of current chain
m_chain_start_skill = nil;

return true;
end

-- Check to see if all the conditions specified for a skill have been met
function _check_conditions( arg_skill_info, arg_target, arg_range, arg_stunned )

-- Default result if there are no conditions is true...so all skills can be run through here and quickly result in true
local l_result = false;
local l_player_pos = Player:GetPosition();
local l_range = l_player_pos:DistanceToPosition( arg_target:GetPosition() );
local l_target_state = arg_target:GetState();
local l_attack_range = Player:GetAttackRange();
local l_player_state = Player:GetState();
local l_skill_name = arg_skill_info.skill_name;
local l_conditions = arg_skill_info.conditions;
local l_value_compare_types =
{
["arg_range"] = true,
["Player_Health_Percent"] = true,
["Player_Mana_Percent"] = true,
["Target_Health_Percent"] = true
};
-- If there are NO conditions to check then return true
if l_conditions == nil then
return true;
end

-- For each set of condition parameters
for key, l_condition in ipairs(l_conditions) do
local l_first_value = nil;
local l_second_value = nil;
local l_compare = nil;
local l_condition_type = l_condition.condition_type;
-- If the condition type was NOT set to something then write a warning message and return false (no condition is okay, but a condition with a nil type is not good)
if (l_condition_type == nil) then
--Write("Condition type was nil for skill '" .. l_skill_name .. "' so returning false, but this is a bug in your skills list.");
return false;
else -- If we got a condition type, then set up the comparison values (first and second) or do any special case tests
if l_condition_type == "arg_range" then
l_first_value = tonumber(l_range);
l_second_value = tonumber(l_condition.compare_value);

elseif l_condition_type == "Player_Health_Percent" then
l_first_value = tonumber(Player:GetHealth());
l_second_value = tonumber(l_condition.compare_value);

elseif l_condition_type == "Player_Mana_Percent" then
l_first_value = tonumber(Player:GetMana());
l_second_value = tonumber(l_condition.compare_value);

elseif l_condition_type == "Target_Health_Percent" then
l_first_value = tonumber(arg_target:GetHealth());
l_second_value = tonumber(l_condition.compare_value);

elseif l_condition_type == "Target_Casting" then
if (arg_target:GetSkillID() ~= 0) and (SkillList[arg_target:GetSkillID()]:IsMagical()) and (arg_target:GetSkillTime() &gt;= 300) then
l_result = true;
end

elseif l_condition_type == "Skill_On_Cooldown" then
if (l_condition.compare_value == nil) then
--Write("Comparison value (should be skill name) was nil for skill '" .. l_skill_name .. "' for skill on cooldown condition so returning false, but this is a bug in your skills list.");
return false;
else
-- The test condition is TRUE if the skill is NOT available, meaning it is on cool down.
l_result = not Helper:CheckAvailable(l_condition.compare_value);
end

elseif l_condition_type == "Buff_Not_Active" then
local l_target_state = arg_target:GetState();
l_result = (l_target_state:GetState( Helper:CheckName( l_skill_name )) == nil);
end

-- More efficient way to check if the condition type is one which requires numerically comparing values
if l_value_compare_types[l_condition_type] ~= nil then
l_compare = l_condition.compare;
-- Check to make sure we were given a comparison operator
if (l_compare == nil) then
--Write("Condition comparison operator was nil for skill '" .. l_skill_name .. "' so returning false, but this is a bug in your skills list.");
return false;
end
-- Check to make sure we were given a comparison value to compare the in game variable to
if l_second_value == nil then
--Write(l_condition_type .. " condition for skill '" .. l_skill_name .. "' has nil comparison value so returning false, but this is a bug in your skills list.");
return false;
end
-- Now check which type of comparison operator to use and perform that comparison (first OPERATOR second)
if l_compare == "&gt;" then
l_result = (l_first_value &gt; l_second_value);
elseif l_compare == "&gt;=" then
l_result = (l_first_value &gt;= l_second_value);
elseif l_compare == "&lt;" then
l_result = (l_first_value &lt; l_second_value);
elseif l_compare == "&lt;=" then
l_result = (l_first_value &lt;= l_second_value);
elseif l_compare == "==" then
l_result = (l_first_value == l_second_value);
end
end
end
-- End the loop as soon as we fail any condition
if not l_result then
break;
end
end

return l_result;
end

-- Search through the list of skills until one is found which is both available and meets any conditions specified for it, then execute it.
function _do_skills(arg_skills, arg_target, arg_range, arg_stunned)

-- Loop through the given skill list checking if the skill is available and any conditions included test as true
for key, l_skill_info in ipairs(arg_skills) do
local l_skill_name = l_skill_info.skill_name;
if (l_skill_name ~= nil) then
local l_conditions_passed = self:_check_conditions( l_skill_info, arg_target, arg_range, arg_stunned );
if (l_conditions_passed) then
local l_available = Helper:CheckAvailable( l_skill_name );
if l_available then
-- Check if this is the start of a chain
if m_chain_info[l_skill_name] ~= nil then
m_doing_chain_skills = true;
m_chain_index = 1;
m_current_chain = m_chain_info[l_skill_name];
m_chain_start_skill = l_skill_name;
Helper:CheckExecute( l_skill_name, arg_target );
m_chain_timeout_time = Time() + m_chain_timeout_interval;
return false;
elseif m_doing_chain_skills then
local l_found_skill_in_chain = false;
for chain_index, chain_skill in ipairs(m_current_chain) do
if l_skill_name == chain_skill then
l_found_skill_in_chain = true;
if chain_index &gt;= m_chain_index then
m_chain_index = chain_index;
Helper:CheckExecute( l_skill_name, arg_target );
m_chain_timeout_time = Time() + m_chain_timeout_interval;
return false;
end
end
end
-- If this skill isn't part of the chain AND the skill has the break_chain flag set to true, then we execute it.
if (not l_found_skill_in_chain) and (l_skill_info.break_chain == true) then
Helper:CheckExecute( l_skill_name, arg_target );
return false;
end
else
Helper:CheckExecute( l_skill_name, arg_target );
return false;
end
end
end
end
end
-- Indicate nothing done so other actions can potentially be taken this tick.
return true;
end



-- Contains the multicast cooldown.
local MulticastCooldown = {}
-- Contains the multicast identifier.
local MulticastId = 0
-- Contains the multicast level.
local MulticastLevel = 0
-- Contains the multicast name.
local MulticastName = nil
-- Contains the multicast reuse.
local MulticastReuse = 0
-- Contains the multicast target level.
local MulticastTargetLevel = 0



--- Perform the attack routine on the selected target.
--
-- @param Entity Contains the entity we have targeted.
-- @param double Contains the distance to the target
-- @param bool Indicates whether or not the target is stunned.
-- @return bool
function Attack( arg_target, arg_range, arg_stunned )

------------------------
--- M U L T I C A S T---
------------------------

-- Check if a multicast level has been set.
if MulticastLevel ~= 0 then
-- Initialize the skill identifier.
local Id = Player:GetSkillId()
-- Check if the skill identifier is set.
if Id ~= 0 then
-- Check if the previous identifier is invalid.
if MulticastId == 0 then
-- Set the previous identifier.
MulticastId = Id
-- Otherwise check if the identifier has increased.
elseif Id &gt; MulticastId then
-- Increment the multicast level.
MulticastLevel = MulticastLevel + 1
-- Set the previous identifier.
MulticastId = Id
-- Check if the desired multicast level has been achieved.
if MulticastLevel == MulticastTargetLevel then
-- End with the Fiery Descadent ability.
selfo(MulticastName)
-- Set the cooldown for the multicast skill.
MulticastCooldown[MulticastName] = Time() + MulticastReuse
-- Reset the multicast level.
MulticastLevel = 0
end
end
-- Prevent other responsibilities.
return false;
end
end

local Position = Player:GetPosition();

-- Check if Fiery Descant is ready for multicast and the target is not yet pissed.
if arg_target:GetHealth() &gt;= 0 and Position:DistanceToPosition( arg_target:GetPosition()) &lt;= 8 and self:Multicast("Kinetic Slam", 3, arg_target) then
-- Prevent other responsibilities.
return false;
end


--Food Checks / Scrolls;
if Settings.CritFood then
self:CheckCritFood();
end

if Settings.AttackFood then
self:CheckAttackFood();
end

if Settings.NaturalHeal then
self:CheckNaturalHeal();
end

if Settings.AttackScroll then
self:CheckAttackScroll();
end

if Settings.RunScroll then
self:CheckRunScroll();
end

if arg_target:IsDead() then
self.m_target = nil
end


-- If we haven't started attacking this entity yet...do pre-attack buffs, then attack buffs, then the actual pull
if (self.m_target ~= arg_target:GetID()) and (not arg_target:IsDead()) then
--Write ("Starting new pull.");

-- If starting a new pull then not doing a chain (even though sometimes Aion will let you finish a chain on a different mob...we will ignore that glitch)
self:_reset_chain_variables();

-- If we are doing a pre-attack buff, then return false to indicate nothing more can be done until next tick
if not self:_do_skills(m_pre_attack_buffs, Player) then
return false;
end
-- If we are doing a mid-attack buff (pre-attack only happens once, but during attack can happen pre-pull or mid attack), then return false to indicate nothing more can be done this tick.
if not self:_do_skills(m_attack_buffs, Player) then
return false;
end
-- If we actually manage to execute a pull attack, then return false to indicate nothing more can be done this tick.
if not self:_do_skills( m_pull_skills, arg_target, arg_range, arg_stunned ) then
self.m_target = arg_target:GetID();
return false;
end
-- Else we HAVE started attacking this entity already so do full attack routine
elseif (not arg_target:IsDead()) then
--Write ("Continuing after pull.");

-- If we're doing a chain and the chain has timed out (too long between chain skills) then reset to not doing a chain and move on.
if ( m_doing_chain_skills ) and ( Time() &gt; m_chain_timeout_time ) then
--Write("Chain '" .. m_chain_start_skill .. "' timed out so resetting variables.");
self:_reset_chain_variables();
end

if ( m_doing_chain_skills ) then
-- Conditionals override everything...should be critical skills...
--Write("In middle of chain skill, checking conditional skills.");
if not self:_do_skills( m_conditional_skills, arg_target, arg_range, arg_stunned ) then
return false;
else
--Write("In middle of chain skill, checking chain skills.");
-- Check to see if we do any chain skills, and return false to indicate nothing more can be done until next tick.
if not self:_do_skills( m_chain_skills, arg_target, arg_range, arg_stunned ) then
return false;
end
end
else
-- Check to see if we do any conditional skills (entity stunned, player stunned, etc etc skills), and return false to indicate nothing more can be done until next tick.
if not self:_do_skills( m_conditional_skills, arg_target, arg_range, arg_stunned ) then
return false;
-- Check to see if we do any chain skills, and return false to indicate nothing more can be done until next tick.
elseif not self:_do_skills( m_chain_skills, arg_target, arg_range, arg_stunned ) then
return false;
-- Check if need to do any mid-attack buffs, and return false to indicate nothing more can be done until next tick if we perform a buff
elseif not self:_do_skills(m_attack_buffs, Player) then
return false;
-- Check to see if we do any normal attack skills, and return false to indicate nothing more can be done until next tick.
elseif not self:_do_skills( l_attack_skills, arg_target, arg_range, arg_stunned ) then
return false;
end
end

end
-- Indicate nothing done so other actions can potentially be taken this tick.
return true;
end


-- Perform an ability without condition checking.
--
function Do(Name)
-- Find the ability with the specified name.
local Ability = AbilityList:GetAbility(Name)
-- Check if the ability is valid.
if Ability ~= nil then
-- Input the command to do the ability.
PlayerInput:Console("/Skill " .. Ability:GetName())
end
end

--
-- Begin a multicast ability.
--
function Multicast(Name, TargetLevel)
-- Initialize the ability.
local Ability = AbilityList:GetAbility(Name)
-- Check if the ability is available.
if Ability ~= nil then
-- Check if the multicast ability is not available.
if MulticastCooldown[Ability:GetName()] ~= nil and MulticastCooldown[Ability:GetName()] &gt;= Time() then
-- Return false.
return false;
-- Otherwise execute the multicast ability.
elseif Helper:CheckExecute(Ability:GetName()) then
-- Initialize the multicast identifier.
MulticastId = 0
-- Initialize the multicast level.
MulticastLevel = 1
-- Initialize the multicast name.
MulticastName = Ability:GetName()
-- Initialize the multicast reuse.
MulticastReuse = Ability:GetReuse()
-- Initialize the multicast target level.
MulticastTargetLevel = TargetLevel
-- Return true.
return true
end
end
-- Return false.
return false
end


--- Perform the required pause checks.
--
-- @return bool

function Pause()

if not self:_do_skills( m_pre_attack_buffs, Player ) then
return false;
end

-- Nothing was executed, continue with other functions.
return true;

end

-- Handle any tasks which should happen when the current target is killed
function TargetDied(arg_target)

m_target = nil;

-- Nothing was executed, continue with other functions.
return true;
end


---------------Bufovani-------------
function CheckCritFood()

stateID = {10224,10225,9976,9989,10051,10064};
foodName = {"Calydon Meat Dumpling","Wild Ginseng Pickle","Tasty Calydon Meat Dumpling","Tasty Wild Ginseng Pickle","Innesi Herb Dumpling","Poma Wine Herb Dumpling","Tasty Innesi Herb Dumpling","Tasty Poma Wine Herb Dumpling"};
flag = 0;

for _,v in ipairs(stateID) do
if Player:GetState():GetState( v ) ~= nil then
flag = flag + 1;
end
end

if flag == 0 then
for a,b in ipairs(foodName) do
if Helper:CheckAvailableInventory( b ) then
PlayerInput:Inventory( b );
break;
end
end
end


return true;
end

--------------------------------
function CheckAttackFood()

stateID = {10051,10064,10224,10225,9976,9989};
foodName = {"Minor Focus Agent","Lesser Focus Agent","Focus Agent","Greater Focus Agent","Major Focus Agent","Fine Focus Agent"};
flag = 0;

for _,v in ipairs(stateID) do
if Player:GetState():GetState( v ) ~= nil then
flag = flag + 1;
end
end

if flag == 0 then
for a,b in ipairs(foodName) do
if Helper:CheckAvailableInventory( b ) then
PlayerInput:Inventory( b );
break;
end
end
end
return true;


end
-----------------------------------
function CheckNaturalHeal()

stateID = {10044,10094};
foodName = {"Minor Rally Serum","Lesser Rally Serum","Rally Serum","Greater Rally Serum","Major Rally Serum","Fine Rally Serum","Tasty Ormea Cocktail"};
flag = 0;

for _,v in ipairs(stateID) do
if Player:GetState():GetState( v ) ~= nil then
flag = flag + 1;
end
end

if flag == 0 then
for a,b in ipairs(foodName) do
if Helper:CheckAvailableInventory( b ) then
PlayerInput:Inventory( b );
break;
end
end
end
return true;

end
-------------------------------------
function CheckAttackScroll()

stateID = {9959};
foodName = {"Greater Courage Scroll"};
flag = 0;

for _,v in ipairs(stateID) do
if Player:GetState():GetState( v ) ~= nil then
flag = flag + 1;
end
end

if flag == 0 then
for a,b in ipairs(foodName) do
if Helper:CheckAvailableInventory( b ) then
PlayerInput:Inventory( b );
break;
end
end
end
return true;

end
--------------------------
function CheckRunScroll()

stateID = {9960};
foodName = {"[Abbey] Grater Running Scroll"};
flag = 0;

for _,v in ipairs(stateID) do
if Player:GetState():GetState( v ) ~= nil then
flag = flag + 1;
end
end

if flag == 0 then
for a,b in ipairs(foodName) do
if Helper:CheckAvailableInventory( b ) then
PlayerInput:Inventory( b );
break;
end
end
end
return true;

end</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Sorcerer.lua for NA *Update*</h3>
				<div class="date">Posted: <strong>Wed Jun 14, 2017 12:39 pm</strong></div>
				<div class="author">by <strong>kirathegod</strong></div>
				<div class="content">Updated!! <img class="smilies" src="images/smilies/icon_e_biggrin.gif" width="15" height="17" alt=":D" title="Very Happy"></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Sorcerer.lua for NA *Update*</h3>
				<div class="date">Posted: <strong>Tue Jul 04, 2017 2:21 am</strong></div>
				<div class="author">by <strong>LordSnack</strong></div>
				<div class="content">Script dont use "Fortified Recovery Potion"</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC">UTC</span><br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.nyerk.xyz/viewtopic.php?f=15&t=170&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 May 2018 09:43:24 GMT -->
</html>
