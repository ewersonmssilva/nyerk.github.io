<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.nyerk.xyz/viewtopic.php?p=331 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 May 2018 09:43:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Official: Songweaver.lua - Page 5 - Nyerk</title>


	<link rel="canonical" href="viewtopic0560.html?t=11&amp;start=40">

<!--
	phpBB style name: we_universal
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      nextgen ( http://xeronix.org/ )
-->


<link href="styles/prosilver/theme/stylesheet5d79.css?assets_version=25" rel="stylesheet">
<link href="assets/css/font-awesome.min5d79.css?assets_version=25" rel="stylesheet">
<link href="styles/we_universal/theme/stylesheet5d79.css?assets_version=25" rel="stylesheet">
<link href="styles/prosilver/theme/responsive5d79.css?assets_version=25" rel="stylesheet">
<link href="styles/we_universal/theme/responsive5d79.css?assets_version=25" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/prosilver/theme/tweaks.css?assets_version=25" rel="stylesheet">
<![endif]-->


<link href="ext/gfksx/ThanksForPosts/styles/prosilver/theme/thanks5d79.css?assets_version=25" rel="stylesheet" type="text/css" media="screen" />



<!--[if lt IE 9]>
	<script type="text/javascript" src="./styles/we_universal/template/html5shiv.min.js"></script>
<![endif]-->

</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr  logged-out">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div class="inventea-headerbar">
		<nav class="inventea-wrapper inventea-userbar">
			<div class="dropdown-container hidden inventea-mobile-dropdown-menu">
    <a href="#" class="dropdown-trigger inventea-toggle"><i class="icon fa fa-bars"></i></a>
    <div class="dropdown hidden">
        <div class="pointer"><div class="pointer-inner"></div></div>
        <ul class="dropdown-contents" role="menubar">
		
														
							<li>
								<a href="index-2.html" role="menuitem">
									<i class="icon fa fa-fw fa-home" aria-hidden="true"></i><span>Board index</span>
								</a>
							</li>		
							
							<li data-skip-responsive="true">
								<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
									<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
								</a>
							</li>
							
													<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
							
														
														
								
						
							<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
	
						
							
            																			<li>
								<a href="memberlist4bfd.html?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
						            
				                    </ul>
    </div>
</div>

			
			<ul class="linklist bulletin inventea-user-menu" role="menubar">
										<li class="small-icon rightside" data-skip-responsive="true"><a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem"><i class="icon fa-fw fa-sign-in" aria-hidden="true"></i>Login</a></li>
											<li class="small-icon rightside" data-skip-responsive="true"><a href="ucp8319.html?mode=register" role="menuitem"><i class="icon fa-fw fa-user-plus" aria-hidden="true"></i>Register</a></li>
										
										
							</ul>
		</nav>
	</div>

	<header class="inventea-header">
			
		<div class="inventea-dashboard" role="banner">
						<nav role="navigation">
	<div class="inventea-posts-menu">
		<ul class="inventea-menu" role="menubar">
			
																			<li><a href="search33a7.html?search_id=unanswered" role="menuitem">Unanswered topics</a></li>
				<li><a href="search526f.html?search_id=active_topics" role="menuitem">Active topics</a></li>
			
					</ul>
	</div>

	<div class="inventea-forum-menu">
		<ul class="inventea-menu" role="menubar">
			
			<li><a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">FAQ</a></li>
			<li><a href="search.html" role="menuitem">Search</a></li>
											<li><a href="memberlist4bfd.html?mode=team" role="menuitem">The team</a></li>			
						
					</ul>
	</div>
</nav>

			<div class="inventea-sitename">
				<h1><a href="index-2.html" title="Board index">Nyerk</a></h1>
				<span>An Forum about Aion</span>
			</div>
		</div>
			</header>

	<div class="inventea-wrapper inventea-content" role="main">
		
		<ul id="nav-breadcrumbs" class="linklist navlinks" role="menubar">
			
									<li class="small-icon breadcrumbs">
												<span class="crumb" itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="index-2.html" accesskey="h" data-navbar-reference="index" itemprop="url"><span itemprop="title">Board index</span></a></span>
														<span class="crumb" itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemprop="url"><span itemprop="title">AionScript</span></a></span>
																			<span class="crumb" itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="8"><a href="viewforum957d.html?f=8" itemprop="url"><span itemprop="title">LUA Scripting</span></a></span>
																			<span class="crumb" itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="" data-forum-id="10"><a href="viewforum15ca.html?f=10" itemprop="url"><span itemprop="title">Bard</span></a></span>
																</li>
					</ul>

		
		
<h2 class="topic-title"><a href="viewtopic78b3.html?f=10&amp;t=11&amp;start=40">Official: Songweaver.lua</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->



<div class="action-bar bar-top">
	
			<a href="postingb99a.html?mode=reply&amp;f=10&amp;t=11" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic23b3.html?f=10&amp;t=11&amp;start=40&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://www.nyerk.xyz/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="11" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			55 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="viewtopic17e0.html?f=10&amp;t=11&amp;start=30" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="viewtopicb1e3.html?f=10&amp;t=11" role="button">1</a></li>
				<li><a class="button" href="viewtopic981b.html?f=10&amp;t=11&amp;start=10" role="button">2</a></li>
				<li><a class="button" href="viewtopic162d.html?f=10&amp;t=11&amp;start=20" role="button">3</a></li>
				<li><a class="button" href="viewtopic17e0.html?f=10&amp;t=11&amp;start=30" role="button">4</a></li>
			<li class="active"><span>5</span></li>
				<li><a class="button" href="viewtopic78d4.html?f=10&amp;t=11&amp;start=50" role="button">6</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopic78d4.html?f=10&amp;t=11&amp;start=50" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




			<div id="p254" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile254">
			<dt class="no-profile-rank no-avatar">
				
				<div class="avatar-container">
																			</div>
								<a href="memberlistd179.html?mode=viewprofile&amp;u=59" class="username">HollyGR</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search4b32.html?author_id=59&amp;sr=posts">21</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Jan 18, 2017 10:30 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="59"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/59/true.html">9 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="59"></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content254">

						<h3 class="first"><a href="#p254">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="posting13b0.html?mode=quote&amp;f=10&amp;p=254" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic6233.html?p=254#p254" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd179.html?mode=viewprofile&amp;u=59" class="username">HollyGR</a></strong> &raquo; </span>Thu Feb 23, 2017 3:30 pm
			</p>
			
			
			
			<div class="content">testing it but it keep spamming self buff even if I put into settings the allow.buff -&gt; false  <img class="smilies" src="images/smilies/icon_e_sad.gif" width="15" height="17" alt=":(" title="Sad"> , any idea? xD<br>
when is not spamming the buff is just keeping the chat opened all time without doing anything or it seems working but just spam autoattack all the time!</div>

			
									
						<div id='list_thanks254'>
</div>
<div id='div_post_reput254'>
</div>
			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p255" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile255">
			<dt class="has-profile-rank no-avatar">
				
				<div class="avatar-container">
																			</div>
								<a href="memberlistf8ff.html?mode=viewprofile&amp;u=51" style="color: #0000FF;" class="username-coloured">locatelli</a>							</dt>

						<dd class="profile-rank">VIP</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search9a92.html?author_id=51&amp;sr=posts">71</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Jan 16, 2017 10:38 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="51"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/51/true.html">11 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="51"><strong>Been&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/51/false.html">8 times</a></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content255">

						<h3 ><a href="#p255">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="postingf8af.html?mode=quote&amp;f=10&amp;p=255" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic0c93.html?p=255#p255" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf8ff.html?mode=viewprofile&amp;u=51" style="color: #0000FF;" class="username-coloured">locatelli</a></strong> &raquo; </span>Thu Feb 23, 2017 4:27 pm
			</p>
			
			
			
			<div class="content">Replace buff code with this:<br>
<br>
if Player:GetState():GetState( "Melody of Life" ) == nil and Player:GetState():GetState( "Blessing of Rock" ) == nil and Player:GetState():GetState( "Blessing of Stone" ) == nil and Helper:CheckAvailable( "Melody of Life" ) then<br>
		Helper:CheckExecute( "Melody of Life",  Player )<br>
		return false;<br>
	end</div>

			
									
						<div id='list_thanks255'>
</div>
<div id='div_post_reput255'>
</div>
			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p261" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile261">
			<dt class="no-profile-rank no-avatar">
				
				<div class="avatar-container">
																			</div>
								<a href="memberlist1a8f.html?mode=viewprofile&amp;u=107" class="username">bionuttt</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2c4e.html?author_id=107&amp;sr=posts">43</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sun Feb 05, 2017 8:25 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="107"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/107/true.html">5 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="107"><strong>Been&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/107/false.html">2 times</a></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content261">

						<h3 ><a href="#p261">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="postingcd92.html?mode=quote&amp;f=10&amp;p=261" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicd89d.html?p=261#p261" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist1a8f.html?mode=viewprofile&amp;u=107" class="username">bionuttt</a></strong> &raquo; </span>Sat Feb 25, 2017 1:49 pm
			</p>
			
			
			
			<div class="content">hey locatelli what stigma build use for this script ?</div>

			
									
						<div id='list_thanks261'>
</div>
<div id='div_post_reput261'>
</div>
			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p262" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile262">
			<dt class="no-profile-rank has-avatar">
				
				<div class="avatar-container">
																<a href="memberlist2a32.html?mode=viewprofile&amp;u=82" class="avatar"><img class="avatar" src="download/file4037.jpg?avatar=82_1489692128.jpg" width="150" height="150" alt="User avatar" /></a>														</div>
								<a href="memberlist2a32.html?mode=viewprofile&amp;u=82" class="username">FarAwaY</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchf8e8.html?author_id=82&amp;sr=posts">48</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sun Jan 29, 2017 9:31 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/82/true.html">22 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82"><strong>Been&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/82/false.html">13 times</a></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content262">

						<h3 ><a href="#p262">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="postinge1d9.html?mode=quote&amp;f=10&amp;p=262" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic7d69.html?p=262#p262" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist2a32.html?mode=viewprofile&amp;u=82" class="username">FarAwaY</a></strong> &raquo; </span>Sat Feb 25, 2017 2:21 pm
			</p>
			
			
			
			<div class="content"><blockquote><div><cite><a href="memberlist1a8f.html?mode=viewprofile&amp;u=107">bionuttt</a> wrote: <a href="viewtopicd89d.html?p=261#p261" data-post-id="261" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">Sat Feb 25, 2017 1:49 pm</div></cite>
hey locatelli what stigma build use for this script ?
</div></blockquote>

<a href="http://aiondatabase.net/en/item/140001288/?sl=1" class="postlink">March of the Bees</a><br>
<a href="http://aiondatabase.net/en/skill/4537/?sl=1" class="postlink">Rejuvenation Melody</a><br>
<a href="http://aiondatabase.net/en/item/140001282/?sl=1" class="postlink">Mosky Requiem</a><br>
<a href="http://aiondatabase.net/en/item/140001296/?sl=1" class="postlink">Disharmony</a><br>
<a href="http://aiondatabase.net/en/item/140001284/?sl=1" class="postlink">Magic Boost Mode</a><br>
<a href="http://aiondatabase.net/en/item/140001290/?sl=1" class="postlink">Dance of the Jester</a></div>

			
									
						<div id='list_thanks262'>
</div>
<div id='div_post_reput262'>
</div>
			<div id="sig262" class="signature"><img src="../origin.webcdn.theblackdesertonline.net/forum/service_live/monthly_02_2016/red_hawk_signature__2__by_daafstudios-d5j5720.png.acd7ab1726380745d4a832c87f7acc89.png" class="postimage" alt="Image"></div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p263" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile263">
			<dt class="has-profile-rank no-avatar">
				
				<div class="avatar-container">
																			</div>
								<a href="memberlistf8ff.html?mode=viewprofile&amp;u=51" style="color: #0000FF;" class="username-coloured">locatelli</a>							</dt>

						<dd class="profile-rank">VIP</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search9a92.html?author_id=51&amp;sr=posts">71</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Jan 16, 2017 10:38 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="51"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/51/true.html">11 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="51"><strong>Been&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/51/false.html">8 times</a></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content263">

						<h3 ><a href="#p263">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="posting82a8.html?mode=quote&amp;f=10&amp;p=263" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic8fee.html?p=263#p263" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf8ff.html?mode=viewprofile&amp;u=51" style="color: #0000FF;" class="username-coloured">locatelli</a></strong> &raquo; </span>Sat Feb 25, 2017 4:03 pm
			</p>
			
			
			
			<div class="content">All stigmas can be used, I just didn't add (yet) support to clearing melody, Dance of Jester, Healing variation, Requiem of Oblivion, March of Desolation, and all high daeva skills.<br>
Attack melody makes script stop to cast it, I tried to add to make it move faster, but doesn't work well :/</div>

			
									
						<div id='list_thanks263'>
</div>
<div id='div_post_reput263'>
</div>
			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p326" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile326">
			<dt class="no-profile-rank no-avatar">
				
				<div class="avatar-container">
																			</div>
								<a href="memberlist397d.html?mode=viewprofile&amp;u=195" class="username">Rorret</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search10ef.html?author_id=195&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Feb 25, 2017 6:33 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="195"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/195/true.html">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="195"></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content326">

						<h3 ><a href="#p326">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="posting415d.html?mode=quote&amp;f=10&amp;p=326" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic4bd3.html?p=326#p326" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist397d.html?mode=viewprofile&amp;u=195" class="username">Rorret</a></strong> &raquo; </span>Mon Mar 06, 2017 4:56 pm
			</p>
			
			
			
			<div class="content"><blockquote><div><cite><a href="memberlistf8ff.html?mode=viewprofile&amp;u=51">locatelli</a> wrote: <a href="viewtopic0c93.html?p=255#p255" data-post-id="255" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">Thu Feb 23, 2017 4:27 pm</div></cite>
Replace buff code with this:<br>
<br>
if Player:GetState():GetState( "Melody of Life" ) == nil and Player:GetState():GetState( "Blessing of Rock" ) == nil and Player:GetState():GetState( "Blessing of Stone" ) == nil and Helper:CheckAvailable( "Melody of Life" ) then<br>
		Helper:CheckExecute( "Melody of Life",  Player )<br>
		return false;<br>
	end
</div></blockquote>

Your code is missing the chanter non stigma buff. If you replace buff code with this it will not get stuck no matter which buff is applied on it:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>if Player:GetState():GetState( "Melody of Life" ) == nil and Player:GetState():GetState( "Blessing of Rock" ) == nil and Player:GetState():GetState( "Blessing of Stone" ) == nil Player:GetState():GetState( "Prayer of Protection" ) == nil 
and Helper:CheckAvailable( "Melody of Life" ) then
		Helper:CheckExecute( "Melody of Life",  Player )
		return false;
	end</code></pre></div>

cheers</div>

			
									
						<div id='list_thanks326'>
</div>
<div id='div_post_reput326'>
</div>
			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p330" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile330">
			<dt class="has-profile-rank no-avatar">
				
				<div class="avatar-container">
																			</div>
								<a href="memberlistf8ff.html?mode=viewprofile&amp;u=51" style="color: #0000FF;" class="username-coloured">locatelli</a>							</dt>

						<dd class="profile-rank">VIP</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search9a92.html?author_id=51&amp;sr=posts">71</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Jan 16, 2017 10:38 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="51"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/51/true.html">11 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="51"><strong>Been&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/51/false.html">8 times</a></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content330">

						<h3 ><a href="#p330">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="posting1b7e.html?mode=quote&amp;f=10&amp;p=330" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic1639-2.html?p=330#p330" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf8ff.html?mode=viewprofile&amp;u=51" style="color: #0000FF;" class="username-coloured">locatelli</a></strong> &raquo; </span>Tue Mar 07, 2017 12:37 am
			</p>
			
			
			
			<div class="content">Oh well thanks, I'll have to write all the new code soon, but not using my Bard again, just went back to bot cu anteriore, i find it more reliable and faster</div>

			
									
						<div id='list_thanks330'>
</div>
<div id='div_post_reput330'>
</div>
			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p331" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile331">
			<dt class="no-profile-rank no-avatar">
				
				<div class="avatar-container">
																			</div>
								<a href="memberlist397d.html?mode=viewprofile&amp;u=195" class="username">Rorret</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search10ef.html?author_id=195&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Feb 25, 2017 6:33 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="195"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/195/true.html">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="195"></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content331">

						<h3 ><a href="#p331">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="posting7010.html?mode=quote&amp;f=10&amp;p=331" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic371d.html?p=331#p331" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist397d.html?mode=viewprofile&amp;u=195" class="username">Rorret</a></strong> &raquo; </span>Tue Mar 07, 2017 1:27 am
			</p>
			
			
			
			<div class="content">I will share mine if you don't mind. It's basically yours but I did some tweaking here and there; changed the buffing and also did some changes to optimize rotation on lower level bards.<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--[[

	--------------------------------------------------
	Copyright (C) 2017 Locatelli

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
	--------------------------------------------------

]]--


--- (Private Function) Checks the healing requirements for the provided entity.
--
-- @param	Entity	Contains the entity to perform healing on.
-- @param	double	Contains the
-- @return	bool

function _CheckHeal( Entity )

	-- Retrieve the range of the entity compared to my own character position.
	local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());

	local EntityState = Entity:GetState();

	-- Check if this routine is allowed to be ran under the current circumstances.
	if Entity:IsDead() or ( not Settings.Songweaver.AllowApproach and Range &gt; 23 ) then
		return true;
	end

	-- Check if the entity requires healing and perform the correct healing routine.
	if Entity:GetHealth() &lt; 80 and ( Settings.Songweaver.AllowApproach or Range &lt;= 23 ) then

		-- Retrieve the local target for certain checks.
		-- local Target = EntityList:GetEntity( Player:GetTargetID());

    --Complete the Chain
    if Entity:GetID() == Player:GetID() and Settings.Songweaver.AllowAttack then
      if Entity:GetHealth() &lt; 90 and Helper:CheckAvailable( "Soft Echo" ) then
        Helper:CheckExecute ( "Soft Echo", Entity )
        return false;
      elseif Entity:GetHealth() &lt; 85 and Helper:CheckAvailable( "Mild Echo" ) then
        Helper:CheckExecute ( "Mild Echo", Entity )
        return false;
      elseif Entity:GetHealth() &lt; 75 and Helper:CheckAvailable( "Gentle Echo" ) then
        Helper:CheckExecute ( "Gentle Echo", Entity )
        return false;
      end
    end
    
		-- Change the healing routine if I'm healing myself when allowed to attack.
		if Entity:GetID() == Player:GetID() and Settings.Songweaver.AllowAttack then  --and Target ~= nil and not Target:IsDead() then
			if Entity:GetHealth() &lt; 50 and Helper:CheckAvailable( "Gentle Echo" ) then
				Helper:CheckExecute( "Gentle Echo", Entity );
				return false;
			end
		-- Check if we should heal the provided entity.
		elseif Entity:GetHealth() &lt; 40 and Helper:CheckAvailable( "Gentle Echo" ) then
			Helper:CheckExecute( "Gentle Echo", Entity );
			return false;
		end

	end
	
	--Heal: Rejuvenation Melody
	if Helper:CheckAvailable( "Rejuvenation Melody" ) and Entity:GetHealth() &lt; 60 then
		Helper:CheckExecute( "Rejuvenation Melody", Entity );
		return false;
	end
	
	-- Return true to let the caller know this function completed.
	return true;

end


---------------------------------------------------------------------------------------
---------------------!!!!!!!!! DO NOT TOUCH MANA HEALING!!!!!!!!!!!--------------------
---------------------------------------------------------------------------------------

--- Checks if the state of the provided entity.
--
-- @param	Entity	Contains the entity to check.
-- @return	bool

function _CheckMana( Entity )

	-- Retrieve the range of the entity compared to my own character position.
	local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());

	local EntityState = Entity:GetState();
  
  -- Check if this routine is allowed to be ran under the current circumstances.
	if Entity:IsDead() or ( not Settings.Songweaver.AllowApproach and Range &gt; 23 ) then
		return true;
	end
  
  --Complete the Chain
  if Player:GetMana() &lt; 60 and Helper:CheckAvailable( "Variation of Peace" ) then
    Helper:CheckExecute ( "Variation of Peace" )
    return false;
  end

	-- Check if the entity requires healing and perform the correct mana healing routine.
	if Entity:GetMana() &lt; 50 and ( Settings.Songweaver.AllowApproach or Range &lt;= 23 ) then
    if Entity:GetMana() &lt; 45 and Helper:CheckAvailable( "Echo of Clarity" ) then
      Helper:CheckExecute( "Echo of Clarity", Entity )
      return false;
    end
  end
  
  if Player:GetMana() &lt; 50 and Helper:CheckAvailable( "Melody of Reflection" ) then
    Helper:CheckExecute( "Melody of Reflection" )
    return false;
  end

	-- Return true to let the caller know this function completed.
	return true;

end
--------------------------------------------------------------------------------------


function _CheckState( Entity )

	-- Retrieve the range of the entity compared to my own character position.
	local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());

	-- Check if this routine is allowed to be ran under the current circumstances.
	if Entity:IsDead() or ( not Settings.Songweaver.AllowApproach and Range &gt; 23 ) then
		return true;
	end

	-- Retrieve the state for the current entity to inspect.
	local EntityState = Entity:GetState();

	-- Loop through the states only when we are available to dispel them. We still check for removed states!
	if EntityState ~= nil and ( self.StateDispelTime == nil or self.StateDispelTime &lt; Time()) then

		-- Create the state array for the global entity storage and undispellable states if it does not exist.
		if self.StateArray == nil or self.StateUndispellable == nil then
			self.StateArray = {};
			self.StateUndispellable = {};
		end

		-- Create the state array for the current entity if it does not exist.
		if self.StateArray[Entity:GetID()] == nil then
			self.StateArray[Entity:GetID()] = {};
		end

		-- Loop through the states to find which need to be removed.
		for ID, Skill in DictionaryIterator( EntityState:GetList()) do

			-- Check if the current skill is valid and has not been marked and undispellable.
			if Skill ~= nil and Skill:IsDebuff() and ( self.StateUndispellable[Skill:GetID()] == nil or self.StateUndispellable[Skill:GetID()] &lt; Time()) then

				-- Check if this entity had the current skill effect on him and hasn't been removed by either Cure Mind or Dispel.
				if self.StateArray[Entity:GetID()][Skill:GetID()] ~= nil and self.StateArray[Entity:GetID()][Skill:GetID()] == 2 then
					self.StateUndispellable[Skill:GetID()] = Time() + 30000;
				-- Remove the state from the entity.
				else

					-- Retrieve the magical state the current skill.
					local RemoveMagical = Skill:IsMagical();

					-- Check if we are required to change the magical state for the current skill.
					if self.StateArray[Entity:GetID()][Skill:GetID()] ~= nil then
						RemoveMagical = not RemoveMagical;
					end

					-- Check if the dispel or cure mind can be executed correctly. The function might need to set the target first!
					if ( RemoveMagical and Helper:CheckExecute( "Melody of Purification", Entity )) or ( not RemoveMagical and Helper:CheckExecute( "Melody of Purification", Entity )) then

						-- Change the state dispel timer to prevent dispel and cure mind from being used too quickly.
						self.StateDispelTime = Time() + 500;

						-- Track the current state of the dispel and cure mind to find undispellable states.
						if self.StateArray[Entity:GetID()][Skill:GetID()] == nil then
							self.StateArray[Entity:GetID()][Skill:GetID()] = 1;
							return false;
						else
							self.StateArray[Entity:GetID()][Skill:GetID()] = 2;
							return false;
						end

					end

				end

			end

		end

		-- Loop through the existing states to find which have been removed correctly.
		for k,v in pairs( self.StateArray[Entity:GetID()] ) do
			if v ~= nil and EntityState:GetState( k ) == nil then
				self.StateArray[Entity:GetID()][k] = nil;
			end
		end

	end

	-- Return true to let the caller know this function completed.
	return true;

end


-----Sleep second target
function CountMobs( EntityTarget, Distance )

	local i = 0;

	-- Iterate through all entities
	for ID, Entity in DictionaryIterator( EntityList:GetList()) do
		-- Check if the entiy is valid.
		if Entity ~= nil then
			-- Retrieve the entity state.
			local EntityState = Entity:GetState();
			-- Check if the entity state is valid.
			if EntityState ~= nil then
				-- Check if this is a living monster that is in range.
				if Entity:IsMonster() and not Entity:IsDead() and Entity:IsHostile() and EntityTarget:GetPosition():DistanceToPosition( Entity:GetPosition()) &lt;= Distance then
					-- Check if this entity is sleeping
					if EntityState:GetState( Helper:CheckName( "March of the Jester" )) ~= nil then
						return 0;
					-- Increment the number.
					else
						i = i + 1;
					end
				end
			end
		end
	end

	return i;

end

function SleepMultipleAttacker( EntityTarget, AttackRange )
	-- Check if we have stored a target.
	if self._SleepTarget ~= nil then
		-- Check if the current target is the stored target.
		if self._SleepTarget:GetID() == Player:GetTargetID() then
			-- Check if Sleep Arrow is available.
			if Helper:CheckAvailable( "March of the Jester" ) then
				-- Shoot the Sleep Arrow.
				Helper:CheckExecute( "March of the Jester" );
				-- Indicate we cannot continue attacking.
				return false;
			else
				-- Set the target.
				Player:SetTarget( self._SleepTargetRestore );
				-- Indicate we cannot continue attacking.
				return false;
			end
		-- Check if the current target is the original target.
		elseif not Helper:CheckAvailable( "March of the Jester" ) and self._SleepTargetRestore:GetID() == EntityTarget:GetID() then
			-- Clear the sleep target.
			self._SleepTarget = nil;
			-- Indicate we cannot continue attacking.
			return true;
		else
			-- Set the target.
			Player:SetTarget( self._SleepTarget );
			-- Indicate we cannot continue attacking.
			return false;
		end
	end
	-- Check if Sleep Arrow is available.
	if Helper:CheckAvailable( "March of the Jester" ) then
		-- Loop through the entities.
		for ID, Entity in DictionaryIterator( EntityList:GetList()) do
			-- Check if this entity is a monster, is not friendly and decided to attack me (and obviously is not my current target).
			if not Entity:IsDead() and Entity:IsMonster() and not Entity:IsFriendly() and Entity:GetTargetID() == Player:GetID() and Entity:GetID() ~= EntityTarget:GetID() then
				-- Check if the entity that is attacking us is within range.
				if Entity:GetPosition():DistanceToPosition( Player:GetPosition()) &lt;= AttackRange then
					-- Store the sleep target.
					self._SleepTarget = Entity;
					-- Store the restore target.
					self._SleepTargetRestore = EntityTarget;
					-- Set the target.
					Player:SetTarget( Entity );
					-- Indicate we cannot continue attacking.
					return false;
				end
			end
		end
	end
	-- Indicate we can continue attacking.
	return true;
end


--- Perform the attack routine on the selected target.
--
-- @param	Entity	Contains the entity we have targeted.
-- @param	double	Contains the distance to the target
-- @param	bool	Indicates whether or not the target is stunned.
-- @return	bool

function Attack( Entity, Range, Stunned )

  ---enemy position check
	local Position = Player:GetPosition();
	--
	local AttackRange = Player:GetAttackRange();
	--
	local EntityState = Entity:GetState();

	local PlayerState = Player:GetState();

	local CaptivateEffect = Entity:GetState():GetState( Helper:CheckName( "Captivate" ));

	-- Check if we are allowed to sleep attackers.
	if Settings.Songweaver.AllowSleep and not self:SleepMultipleAttacker( Entity, AttackRange ) then
		return false;
	end

	-----------------------------------------
	-------------------Shock-----------------
	-----------------------------------------
	
	-- Use Remove Shock
	if Helper:CheckAvailable( "Remove Shock" ) then
		Helper:CheckExecute( "Remove Shock" );
		return false;
	end
	
	-- Finish the Chain
  if Helper:CheckAvailable( "Melody of Appreciation" ) and Player:GetHealth() &lt; 50 then
		Helper:CheckExecute( "Melody of Appreciation" );
		return false;
	elseif Helper:CheckAvailable( "Shock Blast" ) then
		Helper:CheckExecute( "Shock Blast" );
		return false;
	end
  
    -----------------------------------------
	--------------Wind Harmony---------------
	-----------------------------------------
  
	-- Wind Hrmony Buff Check here for best farming speed!
	if Helper:CheckAvailable( "Wind Harmony" ) and Helper:CheckAvailable ( "Chilling Harmony" ) then
      Helper:CheckExecute( "Chilling Harmony" )
      return false;
    end
  
  -----------------------------------------
	-------------Chain Completer-------------
	-----------------------------------------
  
  -- Charged Skills
	if Helper:CheckAvailable( "Tsunami Requiem" ) then
		Helper:CheckExecute( "Tsunami Requiem" );
		return false;
	end
	
	-- Chilling Harmony
	if Helper:CheckAvailable ( "Wind Harmony" ) then
      Helper:CheckExecute( "Wind Harmony" )
      return false;
    elseif Helper:CheckAvailable( "Earth Harmony" ) then
      Helper:CheckExecute( "Earth Harmony" );
      return false;
    elseif Helper:CheckAvailable( "Flame Harmony" ) then
      Helper:CheckExecute( "Flame Harmony" );
      return false;
    end
  
  
-- Mana Bitch
		
	if Player:GetMana() &lt; 50 and Helper:CheckAvailable( "Melody of Reflection" ) then
    		Helper:CheckExecute( "Melody of Reflection" )
    		return false;
  	end


-- Soul Harmony
  if Helper:CheckAvailable( "Harmony of Destruction" ) then
		Helper:CheckExecute( "Harmony of Destruction" );
		return false;
	elseif Helper:CheckAvailable( "Harmony of Death" ) then
		Helper:CheckExecute( "Harmony of Death" );
		return false;
  end
  
  -- Attack Resonation
  if Helper:CheckAvailable( "Acute Grating Sound" ) then
		Helper:CheckExecute( "Acute Grating Sound" );
		return false;
  end
  
	-----------------------------------------
	-----------------Bufovani----------------
	-----------------------------------------

	-- Emergency!: Snowflower Melody
	if Helper:CheckAvailable( "Snowflower Melody" ) and Player:GetHealth() &lt; 40 then
		Helper:CheckExecute( "Snowflower Melody" );
		return false;
	end

	-- Shield Melody
	if Helper:CheckAvailable( "Shield Melody" ) and PlayerState:GetState( "Shield Melody" ) == nil then
		Helper:CheckExecute( "Shield Melody" );
		return false;
	end
	
	-- Buff: Melody of Cheer
	if Helper:CheckAvailable( "Melody of Cheer" ) then
		Helper:CheckExecute( "Melody of Cheer" );
		return false;
	end	
	    
	-----------------------------------------
	--------------Primary Skills-------------
	-----------------------------------------

	-- Harmony of Silence
	if Helper:CheckAvailable( "Harmony of Silence" ) and Entity:GetSkillID() ~= 0 and SkillList[Entity:GetSkillID()]:IsMagical() and Entity:GetSkillTime() &gt;= 500 then
		Helper:CheckExecute( "Harmony of Silence" );
		return false;
	end
	
	-- Fantastic Variation
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Fantastic Variatio" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Fantastic Variation" );
		return false;
	end
  
  -- Illusion Variation
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Illusion Variation" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Illusion Variation" );
		return false;
	end
	
	-- Battle Variation
	if Entity:GetHealth() &gt;= 40 and Helper:CheckAvailable( "Battle Variation" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 9 then
		Helper:CheckExecute( "Battle Variation");
		return false;
	end
	
	-- Ascended Soul Variation
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Ascended Soul Variation" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Ascended Soul Variation" );
		return false;
	end
	
	-- Sea Variation
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Sea Variation" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Sea Variation" );
		return false;
	end
		
  -- 2000DP Skill Symphony of Wrath , Symphony of Destruction
	if Helper:CheckAvailable( "Symphony of Destruction" ) and Player:GetDP() &gt;=2000 then
		Helper:CheckExecute( "Symphony of Destruction");
		return false;
	end

	-- DOT Attack : Attack Resonation
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Attack Resonation" ) and Entity ~= nil then
		Helper:CheckExecute( "Attack Resonation" );
		return false;
	end

	-- Chain : Chilling Harmony
	if Helper:CheckAvailable( "Chilling Harmony" ) then
		Helper:CheckExecute( "Chilling Harmony" );
		return false;
	end	
	
	-- Attack : Loud Bang
	if Helper:CheckAvailable( "Loud Bang" ) then
		Helper:CheckExecute( "Loud Bang" );
		return false;
	end
	
	-- 2000 DP Skill Symphony of Wrath 
	if Entity:GetHealth() &gt;= 50 and Helper:CheckAvailable( "Symphony of Wrath" ) and Player:GetDP() &gt;=2000 then
		Helper:CheckExecute( "Symphony of Wrath");
		return false;
	end

	--  Attack : Disharmony
	if Entity:GetHealth() &gt;= 40 and Helper:CheckAvailable( "Disharmony" ) then
		Helper:CheckExecute( "Disharmony" );
	end	
	
	-- DOT Attack : Mosky Requiem
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Mosky Requiem" ) then
		Helper:CheckExecute( "Mosky Requiem" );
		return false;
	end
	
    -- Attack : Gust Requiem
	if Helper:CheckAvailable( "Gust Requiem" ) then
		Helper:CheckExecute( "Gust Requiem" );
		return false;
	end

	--Attack : March of the Bees
	if Entity:GetHealth() &gt;= 80 and Helper:CheckAvailable( "March of the Bees" ) then
		Helper:CheckExecute( "March of the Bees" );
		return false;
	end
	--Chain attack: Harmony of Death
	if Helper:CheckAvailable( "Soul Harmony" ) then
		Helper:CheckExecute( "Soul Harmony" );
		return false;
	end
	
	-- Attack : Sound of the Breeze
	if Helper:CheckAvailable( "Sound of the Breeze" ) then
		Helper:CheckExecute( "Sound of the Breeze" );
		return false;
	end
	
	-- Initial Attack : Automatic Attack
	if self.AttackStarted ~= Entity:GetID() then
		self.AttackStarted = Entity:GetID();
		Helper:CheckExecute( "Attack/Chat" );
		return false;
	end

end

	
--- Perform healing checks both in and our of combat.
--
-- @param	bool	Indicates whether or not the function is running before force checks.
-- @return	bool

function Heal( BeforeForce )

	if BeforeForce and Settings.Songweaver.AllowBuff and ( self.StateBuffTime == nil or self.StateBuffTime &lt; Time()) then

		local EntityState = Player:GetState();

		if EntityState ~= nil then
			if EntityState:GetState( "Melody of Life" ) == nil and EntityState:GetState( "Blessing of stone" ) == nil and EntityState:GetState( "Blessing of Rock" ) == nil and EntityState:GetState( "Prayer of Protection" ) == nil and Helper:CheckAvailable( "Melody of Life" ) then
			Helper:CheckExecute( "Melody of Life",  Entity )
			end
		end
  
	end

	-- Check if we are allowed to execute our healing routines, after checking the force we can check our own HP.
	if not BeforeForce and Settings.Songweaver.AllowHealing then

		-- Check the required direct healing for my own character.
		if not self:_CheckHeal( Player ) then
			return false;
		end

	end

	-- Check if we are allowed to execute our healing routines, after checking the force we can check our own HP.
	if not BeforeForce and Settings.Songweaver.AllowHealingMana then

		-- Check the required direct healing for my own character.
		if not self:_CheckMana( Player ) then
			return false;
		end

	end

	-- Nothing was executed, continue with other functions.
	return true;

end

--- Perform the safety checks before moving to the next target.
--
-- @return	bool

function Pause()
  
  --self:_CheckHeal ( Player )
  --self:_CheckMana ( Player )
  
	-- Nothing was executed, continue with other functions.
	return true;

end</code></pre></div></div>

			
									
						<div id='list_thanks331'>
</div>
<div id='div_post_reput331'>
</div>
			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p733" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile733">
			<dt class="has-profile-rank no-avatar">
				
				<div class="avatar-container">
																			</div>
								<a href="memberlistf5a9.html?mode=viewprofile&amp;u=68" style="color: #0000FF;" class="username-coloured">sapibuntinx</a>							</dt>

						<dd class="profile-rank">VIP</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search7cbe.html?author_id=68&amp;sr=posts">25</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Jan 20, 2017 1:58 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="68"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/68/true.html">8 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="68"><strong>Been&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/68/false.html">14 times</a></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content733">

						<h3 ><a href="#p733">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="postingc864.html?mode=quote&amp;f=10&amp;p=733" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic2531.html?p=733#p733" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf5a9.html?mode=viewprofile&amp;u=68" style="color: #0000FF;" class="username-coloured">sapibuntinx</a></strong> &raquo; </span>Tue Apr 11, 2017 1:20 pm
			</p>
			
			
			
			<div class="content">My NA translation for the original script:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--[[

	--------------------------------------------------
	Copyright (C) 2017 Locatelli

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
	--------------------------------------------------

]]--


--- (Private Function) Checks the healing requirements for the provided entity.
--
-- @param	Entity	Contains the entity to perform healing on.
-- @param	double	Contains the
-- @return	bool

function _CheckHeal( Entity )

	-- Retrieve the range of the entity compared to my own character position.
	local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());

	local EntityState = Entity:GetState();

	-- Check if this routine is allowed to be ran under the current circumstances.
	if Entity:IsDead() or ( not Settings.Songweaver.AllowApproach and Range &gt; 23 ) then
		return true;
	end

	-- Check if the entity requires healing and perform the correct healing routine.
	if Entity:GetHealth() &lt; 80 and ( Settings.Songweaver.AllowApproach or Range &lt;= 23 ) then

		-- Retrieve the local target for certain checks.
		-- local Target = EntityList:GetEntity( Player:GetTargetID());

    --Complete the Chain
    if Entity:GetID() == Player:GetID() and Settings.Songweaver.AllowAttack then
      if Entity:GetHealth() &lt; 90 and Helper:CheckAvailable( "Joyous Carol" ) then
        Helper:CheckExecute ( "Joyous Carol", Entity )
        return false;
      elseif Entity:GetHealth() &lt; 90 and Helper:CheckAvailable( "Soothing Finale" ) then
        Helper:CheckExecute ( "Soothing Finale", Entity )
        return false;
      elseif Entity:GetHealth() &lt; 90 and Helper:CheckAvailable( "Soothing Counterpoint" ) then
        Helper:CheckExecute ( "Soothing Counterpoint", Entity )
        return false;
      end
    end
    
		-- Change the healing routine if I'm healing myself when allowed to attack.
		if Entity:GetID() == Player:GetID() and Settings.Songweaver.AllowAttack then  --and Target ~= nil and not Target:IsDead() then
			if Entity:GetHealth() &lt; 50 and Helper:CheckAvailable( "Soothing Melody" ) then
				Helper:CheckExecute( "Soothing Melody", Entity );
				return false;
			end
		-- Check if we should heal the provided entity.
		elseif Entity:GetHealth() &lt; 40 and Helper:CheckAvailable( "Soothing Melody" ) then
			Helper:CheckExecute( "Soothing Melody", Entity );
			return false;
		end

	end
	
	--Heal: Hymn of Rejuvenation
	if Helper:CheckAvailable( "Hymn of Rejuvenation" ) and Entity:GetHealth() &lt; 60 then
		Helper:CheckExecute( "Hymn of Rejuvenation", Entity );
		return false;
	end
	
	-- Return true to let the caller know this function completed.
	return true;

end


---------------------------------------------------------------------------------------
---------------------!!!!!!!!! DO NOT TOUCH MANA HEALING!!!!!!!!!!!--------------------
---------------------------------------------------------------------------------------

--- Checks if the state of the provided entity.
--
-- @param	Entity	Contains the entity to check.
-- @return	bool

function _CheckMana( Entity )

	-- Retrieve the range of the entity compared to my own character position.
	local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());

	local EntityState = Entity:GetState();
  
  -- Check if this routine is allowed to be ran under the current circumstances.
	if Entity:IsDead() or ( not Settings.Songweaver.AllowApproach and Range &gt; 23 ) then
		return true;
	end
  
  --Complete the Chain
  if Player:GetMana() &lt; 90 and Helper:CheckAvailable( "Resonant Hymn" ) then
    Helper:CheckExecute ( "Resonant Hymn" )
    return false;
  end

	-- Check if the entity requires healing and perform the correct mana healing routine.
	if Entity:GetMana() &lt; 50 and ( Settings.Songweaver.AllowApproach or Range &lt;= 23 ) then
    if Entity:GetMana() &lt; 45 and Helper:CheckAvailable( "Resonant Counterpoint" ) then
      Helper:CheckExecute( "Resonant Counterpoint", Entity )
      return false;
    end
  end
  
  if Player:GetMana() &lt; 50 and Helper:CheckAvailable( "Resonating Melody" ) then
    Helper:CheckExecute( "Resonating Melody" )
    return false;
  end

	-- Return true to let the caller know this function completed.
	return true;

end
--------------------------------------------------------------------------------------


function _CheckState( Entity )

	-- Retrieve the range of the entity compared to my own character position.
	local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());

	-- Check if this routine is allowed to be ran under the current circumstances.
	if Entity:IsDead() or ( not Settings.Songweaver.AllowApproach and Range &gt; 23 ) then
		return true;
	end

	-- Retrieve the state for the current entity to inspect.
	local EntityState = Entity:GetState();

	-- Loop through the states only when we are available to dispel them. We still check for removed states!
	if EntityState ~= nil and ( self.StateDispelTime == nil or self.StateDispelTime &lt; Time()) then

		-- Create the state array for the global entity storage and undispellable states if it does not exist.
		if self.StateArray == nil or self.StateUndispellable == nil then
			self.StateArray = {};
			self.StateUndispellable = {};
		end

		-- Create the state array for the current entity if it does not exist.
		if self.StateArray[Entity:GetID()] == nil then
			self.StateArray[Entity:GetID()] = {};
		end

		-- Loop through the states to find which need to be removed.
		for ID, Skill in DictionaryIterator( EntityState:GetList()) do

			-- Check if the current skill is valid and has not been marked and undispellable.
			if Skill ~= nil and Skill:IsDebuff() and ( self.StateUndispellable[Skill:GetID()] == nil or self.StateUndispellable[Skill:GetID()] &lt; Time()) then

				-- Check if this entity had the current skill effect on him and hasn't been removed by either Cure Mind or Dispel.
				if self.StateArray[Entity:GetID()][Skill:GetID()] ~= nil and self.StateArray[Entity:GetID()][Skill:GetID()] == 2 then
					self.StateUndispellable[Skill:GetID()] = Time() + 30000;
				-- Remove the state from the entity.
				else

					-- Retrieve the magical state the current skill.
					local RemoveMagical = Skill:IsMagical();

					-- Check if we are required to change the magical state for the current skill.
					if self.StateArray[Entity:GetID()][Skill:GetID()] ~= nil then
						RemoveMagical = not RemoveMagical;
					end

					-- Check if the dispel or cure mind can be executed correctly. The function might need to set the target first!
					if ( RemoveMagical and Helper:CheckExecute( "Purifying Paean", Entity )) or ( not RemoveMagical and Helper:CheckExecute( "Purifying Paean", Entity )) then

						-- Change the state dispel timer to prevent dispel and cure mind from being used too quickly.
						self.StateDispelTime = Time() + 500;

						-- Track the current state of the dispel and cure mind to find undispellable states.
						if self.StateArray[Entity:GetID()][Skill:GetID()] == nil then
							self.StateArray[Entity:GetID()][Skill:GetID()] = 1;
							return false;
						else
							self.StateArray[Entity:GetID()][Skill:GetID()] = 2;
							return false;
						end

					end

				end

			end

		end

		-- Loop through the existing states to find which have been removed correctly.
		for k,v in pairs( self.StateArray[Entity:GetID()] ) do
			if v ~= nil and EntityState:GetState( k ) == nil then
				self.StateArray[Entity:GetID()][k] = nil;
			end
		end

	end

	-- Return true to let the caller know this function completed.
	return true;

end


-----Sleep second target
function CountMobs( EntityTarget, Distance )

	local i = 0;

	-- Iterate through all entities
	for ID, Entity in DictionaryIterator( EntityList:GetList()) do
		-- Check if the entiy is valid.
		if Entity ~= nil then
			-- Retrieve the entity state.
			local EntityState = Entity:GetState();
			-- Check if the entity state is valid.
			if EntityState ~= nil then
				-- Check if this is a living monster that is in range.
				if Entity:IsMonster() and not Entity:IsDead() and Entity:IsHostile() and EntityTarget:GetPosition():DistanceToPosition( Entity:GetPosition()) &lt;= Distance then
					-- Check if this entity is sleeping
					if EntityState:GetState( Helper:CheckName( "Requiem" )) ~= nil then
						return 0;
					-- Increment the number.
					else
						i = i + 1;
					end
				end
			end
		end
	end

	return i;

end

function SleepMultipleAttacker( EntityTarget, AttackRange )
	-- Check if we have stored a target.
	if self._SleepTarget ~= nil then
		-- Check if the current target is the stored target.
		if self._SleepTarget:GetID() == Player:GetTargetID() then
			-- Check if Sleep Arrow is available.
			if Helper:CheckAvailable( "Requiem" ) then
				-- Shoot the Sleep Arrow.
				Helper:CheckExecute( "Requiem" );
				-- Indicate we cannot continue attacking.
				return false;
			else
				-- Set the target.
				Player:SetTarget( self._SleepTargetRestore );
				-- Indicate we cannot continue attacking.
				return false;
			end
		-- Check if the current target is the original target.
		elseif not Helper:CheckAvailable( "Requiem" ) and self._SleepTargetRestore:GetID() == EntityTarget:GetID() then
			-- Clear the sleep target.
			self._SleepTarget = nil;
			-- Indicate we cannot continue attacking.
			return true;
		else
			-- Set the target.
			Player:SetTarget( self._SleepTarget );
			-- Indicate we cannot continue attacking.
			return false;
		end
	end
	-- Check if Sleep Arrow is available.
	if Helper:CheckAvailable( "Requiem" ) then
		-- Loop through the entities.
		for ID, Entity in DictionaryIterator( EntityList:GetList()) do
			-- Check if this entity is a monster, is not friendly and decided to attack me (and obviously is not my current target).
			if not Entity:IsDead() and Entity:IsMonster() and not Entity:IsFriendly() and Entity:GetTargetID() == Player:GetID() and Entity:GetID() ~= EntityTarget:GetID() then
				-- Check if the entity that is attacking us is within range.
				if Entity:GetPosition():DistanceToPosition( Player:GetPosition()) &lt;= AttackRange then
					-- Store the sleep target.
					self._SleepTarget = Entity;
					-- Store the restore target.
					self._SleepTargetRestore = EntityTarget;
					-- Set the target.
					Player:SetTarget( Entity );
					-- Indicate we cannot continue attacking.
					return false;
				end
			end
		end
	end
	-- Indicate we can continue attacking.
	return true;
end


--- Perform the attack routine on the selected target.
--
-- @param	Entity	Contains the entity we have targeted.
-- @param	double	Contains the distance to the target
-- @param	bool	Indicates whether or not the target is stunned.
-- @return	bool

function Attack( Entity, Range, Stunned )

  ---enemy position check
	local Position = Player:GetPosition();
	--
	local AttackRange = Player:GetAttackRange();
	--
	local EntityState = Entity:GetState();

	local PlayerState = Player:GetState();

	local CaptivateEffect = Entity:GetState():GetState( Helper:CheckName( "Captivate" ));

	-- Check if we are allowed to sleep attackers.
	if Settings.Songweaver.AllowSleep and not self:SleepMultipleAttacker( Entity, AttackRange ) then
		return false;
	end

	-----------------------------------------
	-------------------Shock-----------------
	-----------------------------------------
	
	-- Use Remove Shock
	if Helper:CheckAvailable( "Remove Shock" ) then
		Helper:CheckExecute( "Remove Shock" );
		return false;
	end
	
	-- Finish the Chain
  if Helper:CheckAvailable( "Hymn of Thanksgiving" ) and Player:GetHealth() &lt; 50 then
		Helper:CheckExecute( "Hymn of Thanksgiving" );
		return false;
	elseif Helper:CheckAvailable( "Chorus of Fortitude" ) then
		Helper:CheckExecute( "Chorus of Fortitude" );
		return false;
	end
  
    -----------------------------------------
	--------------Thronesong---------------
	-----------------------------------------
  
	-- Wind Hrmony Buff Check here for best farming speed!
	if Helper:CheckAvailable( "Thronesong" ) and Helper:CheckAvailable ( "Song of Ice" ) then
      Helper:CheckExecute( "Song of Ice" )
      return false;
    end
  
  -----------------------------------------
	-------------Chain Completer-------------
	-----------------------------------------
  
  -- Charged Skills
	if Helper:CheckAvailable( "Sonic Splash" ) then
		Helper:CheckExecute( "Sonic Splash" );
		return false;
	end
	
	-- Song of Ice
	if Helper:CheckAvailable ( "Thronesong" ) then
      Helper:CheckExecute( "Thronesong" )
      return false;
    elseif Helper:CheckAvailable( "Song of Earth" ) then
      Helper:CheckExecute( "Song of Earth" );
      return false;
    elseif Helper:CheckAvailable( "Song of Fire" ) then
      Helper:CheckExecute( "Song of Fire" );
      return false;
    end
  
  -- Bright Strike
  if Helper:CheckAvailable( "Bright Flourish" ) then
		Helper:CheckExecute( "Bright Flourish" );
		return false;
	elseif Helper:CheckAvailable( "Bright Stroke" ) then
		Helper:CheckExecute( "Bright Stroke" );
		return false;
  end
  
  -- Syncopated Echo
  if Helper:CheckAvailable( "Fluttered Note" ) then
		Helper:CheckExecute( "Fluttered Note" );
		return false;
  end
  
	-----------------------------------------
	-----------------Bufovani----------------
	-----------------------------------------

	-- Emergency!: Mvt. 4: Winter
	if Helper:CheckAvailable( "Mvt. 4: Winter" ) and Player:GetHealth() &lt; 40 then
		Helper:CheckExecute( "Mvt. 4: Winter" );
		return false;
	end

	-- Protective Ode
	if Helper:CheckAvailable( "Protective Ode" ) and PlayerState:GetState( "Protective Ode" ) == nil then
		Helper:CheckExecute( "Protective Ode" );
		return false;
	end
	
	-- Buff: Rejuvenating Aria
	if Helper:CheckAvailable( "Rejuvenating Aria" ) and Entity:GetHealth() &lt; 90 then
		Helper:CheckExecute( "Rejuvenating Aria" );
		return false;
	end	
	    
	-----------------------------------------
	--------------Primary Skills-------------
	-----------------------------------------

	-- Quaver
	if Helper:CheckAvailable( "Quaver" ) and Entity:GetSkillID() ~= 0 and SkillList[Entity:GetSkillID()]:IsMagical() and Entity:GetSkillTime() &gt;= 500 then
		Helper:CheckExecute( "Quaver" );
		return false;
	end
	
	-- Blazing Requiem
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Blazing Requiem" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Blazing Requiem" );
		return false;
	end
  
  -- Fiery Requiem
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Fiery Requiem" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Fiery Requiem" );
		return false;
	end
	
	-- Fiery Descant
	if Entity:GetHealth() &gt;= 0 and Helper:CheckAvailable( "Fiery Descant" ) and Helper:CheckAvailable( "Sonic Splash" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Fiery Descant");
		return false;
	end
	
	-- Dragon Song
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Dragon Song" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Dragon Song" );
		return false;
	end
	
	-- Harpist's Pod
	if Entity:GetHealth() &gt;= 90 and Helper:CheckAvailable( "Harpist's Pod" ) and Position:DistanceToPosition( Entity:GetPosition()) &gt;= 12 then
		Helper:CheckExecute( "Harpist's Pod" );
		return false;
	end
		
  -- 2000DP Skill Minstrel's Flair , Symphony of Destruction
	if Helper:CheckAvailable( "Symphony of Destruction" ) and Player:GetDP() &gt;=2000 then
		Helper:CheckExecute( "Symphony of Destruction");
		return false;
	end

	-- DOT Attack : Syncopated Echo
	if Entity:GetHealth() &gt;= 80 and Helper:CheckAvailable( "Syncopated Echo" ) and Entity ~= nil then
		Helper:CheckExecute( "Syncopated Echo" );
		return false;
	end

	-- Chain : Song of Ice
	if Helper:CheckAvailable( "Song of Ice" ) then
		Helper:CheckExecute( "Song of Ice" );
		return false;
	end	
	
	-- Attack : Adagio
	if Helper:CheckAvailable( "Adagio" ) then
		Helper:CheckExecute( "Adagio" );
		return false;
	end
	
	-- 2000 DP Skill Minstrel's Flair 
	if Helper:CheckAvailable( "Minstrel's Flair" ) and Player:GetDP() &gt;=2000 then
		Helper:CheckExecute( "Minstrel's Flair");
		return false;
	end

	--  Attack : Treble Cleave
	if Entity:GetHealth() &gt;= 25 and Helper:CheckAvailable( "Treble Cleave" ) then
		Helper:CheckExecute( "Treble Cleave" );
	end	
	
	-- DOT Attack : Paean of Pain
	if Entity:GetHealth() &gt;= 80 and Helper:CheckAvailable( "Paean of Pain" ) then
		Helper:CheckExecute( "Paean of Pain" );
		return false;
	end
	
    -- Attack : Sonic Gust
	if Helper:CheckAvailable( "Sonic Gust" ) then
		Helper:CheckExecute( "Sonic Gust" );
		return false;
	end

	--Attack : Stinging Note
	if Helper:CheckAvailable( "Stinging Note" ) then
		Helper:CheckExecute( "Stinging Note" );
		return false;
	end
	--Chain attack: Bright Stroke
	if Helper:CheckAvailable( "Bright Strike" ) then
		Helper:CheckExecute( "Bright Strike" );
		return false;
	end
	
	-- Attack : Pulse
	if Helper:CheckAvailable( "Pulse" ) then
		Helper:CheckExecute( "Pulse" );
		return false;
	end
	
	-- Initial Attack : Automatic Attack
	if self.AttackStarted ~= Entity:GetID() then
		self.AttackStarted = Entity:GetID();
		Helper:CheckExecute( "Attack/Chat" );
		return false;
	end

end

	
--- Perform healing checks both in and our of combat.
--
-- @param	bool	Indicates whether or not the function is running before force checks.
-- @return	bool

function Heal( BeforeForce )

	if BeforeForce and Settings.Songweaver.AllowBuff and ( self.StateBuffTime == nil or self.StateBuffTime &lt; Time()) then

		local EntityState = Player:GetState();

		if EntityState ~= nil then
			if EntityState:GetState( "Etude" ) == nil and Helper:CheckAvailable( "Etude" ) then
			Helper:CheckExecute( "Etude",  Entity )
			end
		end
	end

	-- Check if we are allowed to execute our healing routines, after checking the force we can check our own HP.
	if not BeforeForce and Settings.Songweaver.AllowHealing then

		-- Check the required direct healing for my own character.
		if not self:_CheckHeal( Player ) then
			return false;
		end

	end

	-- Check if we are allowed to execute our healing routines, after checking the force we can check our own HP.
	if not BeforeForce and Settings.Songweaver.AllowHealingMana then

		-- Check the required direct healing for my own character.
		if not self:_CheckMana( Player ) then
			return false;
		end

	end

	-- Nothing was executed, continue with other functions.
	return true;

end

--- Perform the safety checks before moving to the next target.
--
-- @return	bool

function Pause()
  
  --self:_CheckHeal ( Player )
  --self:_CheckMana ( Player )
  
	-- Nothing was executed, continue with other functions.
	return true;

end
</code></pre></div></div>

			
									
						<div id='list_thanks733'>
</div>
<div id='div_post_reput733'>
</div>
			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p1014" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile1014">
			<dt class="no-profile-rank has-avatar">
				
				<div class="avatar-container">
																<a href="memberliste9ad.html?mode=viewprofile&amp;u=468" class="avatar"><img class="avatar" src="download/file3e75.png?avatar=468_1509356961.png" width="150" height="150" alt="User avatar" /></a>														</div>
								<a href="memberliste9ad.html?mode=viewprofile&amp;u=468" class="username">LordSnack</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search47f1.html?author_id=468&amp;sr=posts">96</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Jun 13, 2017 10:44 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="468"><strong>Has&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/468/true.html">26 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="468"><strong>Been&nbsp;thanked:</strong> <a href="app.php/thankslist/givens/468/false.html">10 times</a></dd>

						
		</dl>

		<div class="postbody">
						<div id="post_content1014">

						<h3 ><a href="#p1014">Re: Official: Songweaver.lua</a></h3>
													<ul class="post-buttons">
																																									<li>
							<a href="posting4d67.html?mode=quote&amp;f=10&amp;p=1014" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
															</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic039f.html?p=1014#p1014" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberliste9ad.html?mode=viewprofile&amp;u=468" class="username">LordSnack</a></strong> &raquo; </span>Tue Jul 04, 2017 6:18 pm
			</p>
			
			
			
			<div class="content">Bot dont Heal himself or heal Mana :c</div>

			
									
						<div id='list_thanks1014'>
</div>
<div id='div_post_reput1014'>
</div>
			<div id="sig1014" class="signature">EU Thor - Gameforge | NA - Danaria</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingb99a.html?mode=reply&amp;f=10&amp;t=11" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
	
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic23b3.html?f=10&amp;t=11&amp;start=40&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<form method="post" action="https://www.nyerk.xyz/viewtopic.php?f=10&amp;t=11&amp;start=40">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			55 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="viewtopic17e0.html?f=10&amp;t=11&amp;start=30" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="viewtopicb1e3.html?f=10&amp;t=11" role="button">1</a></li>
				<li><a class="button" href="viewtopic981b.html?f=10&amp;t=11&amp;start=10" role="button">2</a></li>
				<li><a class="button" href="viewtopic162d.html?f=10&amp;t=11&amp;start=20" role="button">3</a></li>
				<li><a class="button" href="viewtopic17e0.html?f=10&amp;t=11&amp;start=30" role="button">4</a></li>
			<li class="active"><span>5</span></li>
				<li><a class="button" href="viewtopic78d4.html?f=10&amp;t=11&amp;start=50" role="button">6</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="viewtopic78d4.html?f=10&amp;t=11&amp;start=50" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum15ca.html?f=10" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Bard”</span>
		</a>
	</p>
	
		<br /><br />
	</div>

	<div class="stat-block online-list">
		<h3>Who is online</h3>
		<p>Users browsing this forum: No registered users and 0 guests</p>
	</div>

				
			</div>

	<div class="inventea-footer-wrapper">
		<div id="page-footer" class="inventea-footer" role="contentinfo">
			<nav role="navigation">
	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><span>Board index</span></a></span>					</li>

						<li class="small-icon" data-last-responsive="true"><a href="memberlist8733.html?mode=contactadmin" role="menuitem">Contact us</a></li>
				
		<li class="small-icon"><a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">Delete all board cookies</a></li>
				<li>All times are <span title="UTC">UTC</span></li>
			</ul>
</nav>

			<footer class="inventea-credits">
								Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited<br />
								Style we_universal created by <a href="https://inventea.com/" title="phpBB styles, HTML5 &amp; CSS3 templates">INVENTEA</a> & <a href="http://xeronix.org/" title="phpBB styles and much more">nextgen</a>
											</footer>
		</div>
	</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
	<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>
</div>

<script type="text/javascript" src="assets/javascript/jquery.min5d79.js?assets_version=25"></script>
<script type="text/javascript" src="assets/javascript/core5d79.js?assets_version=25"></script>



<script type="text/javascript" src="styles/prosilver/template/forum_fn5d79.js?assets_version=25"></script>
<script type="text/javascript" src="styles/prosilver/template/ajax5d79.js?assets_version=25"></script>



</body>

<!-- Mirrored from www.nyerk.xyz/viewtopic.php?p=331 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 May 2018 09:43:22 GMT -->
</html>
