<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from www.nyerk.xyz/viewtopic.php?f=7&t=9&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 May 2018 09:39:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>Nyerk &bull; Basic Lua Knowledge</title>

<link href="styles/we_universal/theme/print.html" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>Nyerk</h1>
		<p>An Forum about Aion<br /><a href="index.html">https://www.nyerk.xyz/</a></p>

		<h2>Basic Lua Knowledge</h2>
		<p><a href="viewtopic7bc7.html?f=7&amp;t=9">https://www.nyerk.xyz/viewtopic.php?f=7&amp;t=9</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>2</strong></div>
					<div class="post">
				<h3>Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Fri Jan 13, 2017 8:58 pm</strong></div>
				<div class="author">by <strong>agonic</strong></div>
				<div class="content">********************* PLS CHECK AND FIX/EDIT ENGRISSHHHH**********<br>
<br>
Basic lua knowledge;<br>
<br>
-Ofcourse, It is a programming language.<br>
-File association is *.lua<br>
-Lua files contain scripts in aionscript folder and that scripts must be written by someone.<br>
-Similar to basic english mixed math. (My opinion)<br>
-Class scripts must be written by someone. Never falls from sky.<br>
-Better editing tool is Notepad++. <a href="https://notepad-plus-plus.org/" class="postlink">https://notepad-plus-plus.org/</a><br>
<br>
Some explanations about terms in the scripts;<br>
-Entity is your target. It can be enemy or friendly, who is targeted by you, even yourself too. Player is, ofc, you.<br>
-State,as simply, is your buffs, debuffs. You can check your and entity's state(s). <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Player/Entity:GetState():GetState("State's name")</code></pre></div> or <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Player/Entity:GetState():GetState(State ID, as number ofc)</code></pre></div>
- "~= nil" means is exist. "== nill" means is not exist. For example, <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Player/Entity:GetState():GetState(8224) ~= nill/== nill</code></pre></div>.<br>
-"local" is using for an abbreviation for some similar situations or juts using as an abbreviation. For example;
	<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>local EntityState = Entity:GetState();
local Posion = EntityState:GetState( "Venomous Strike" ) ~= nil or EntityState:GetState( "Massacre" ) ~= nil</code></pre></div>
-Basic writing template of skill is like;
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>if Helper:CheckAvailable("Skill name like in game") then
	Helper:CheckExecute( "Skill name like in game" );
end</code></pre></div>
-You can use abbreviations like;
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>if Poison and Helper:CheckAvailable("Skill name like in game") then
	Helper:CheckExecute( "Skill name like in game" );
end</code></pre></div>
-Script files contain some "function"s to run some situations. For example;<br>
	function Attack() is your main attack routine funciton. function Pause() is doing somethings, when you are not busy. You can add your own functions into the script. <br>
-Functions is written like;
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>function Desired name(Desired situations like Stunned, Range, Entity, EntityState)
	your lines
end</code></pre></div>
-How to add your functions into Attack funcion ?
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>self:Desired name(Desired situations like Stunned, Range, Entity, EntityState);</code></pre></div>
		Or
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>local desired abbreviation = self:Desired name(Desired situations like Stunned, Range, Entity, EntityState);</code></pre></div>
		<br>
-Some examples;
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>local Entity = EntityList:GetEntity( Player:GetTargetID());
local EntityState = Entity:GetState();
local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());
Entity:GetClass():ToString() == "Assassin, Gladiator, Chanter..."
Entity:GetName() == "Stormwing"
Player:GetHealthCurrent() &lt; Player:GetHealthMaximum() == / &lt;= / &gt;= 2500</code></pre></div>
			
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>function GetBuff()

	-- Loop through the state of the target entity 
	for i = 0, Player:GetState():GetStateSize() - 1, 1 do
				
	-- Retrieve the state from the EntityState.
	local StateIndex = Player:GetState():GetStateIndex( i );

	-- Check if the state is correct and check if it is a debuff.
		if StateIndex ~= nil and StateIndex:IsDebuff() then		
			return true;			
		end
					
	end
				
end</code></pre></div>
			
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>if self:GetBuff() then
	if Helper:CheckAvailableInventory( "Greater Healing Potion" ) then
		PlayerInput:Inventory( "Greater Healing Potion" );
		return false;
	end
end</code></pre></div>

I can add more examples..</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Wed Feb 15, 2017 2:06 am</strong></div>
				<div class="author">by <strong>0x00</strong></div>
				<div class="content">I really love your dedication! Nice job, keep it up!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Wed Feb 15, 2017 2:27 pm</strong></div>
				<div class="author">by <strong>agonic</strong></div>
				<div class="content"><blockquote><div><cite><a href="memberlistd942.html?mode=viewprofile&amp;u=49">0x00</a> wrote: <a href="viewtopic78d6.html?p=195#p195" data-post-id="195" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">Wed Feb 15, 2017 2:06 am</div></cite>
I really love your dedication! Nice job, keep it up!
</div></blockquote>

Thank youuu <img class="smilies" src="images/smilies/icon_e_biggrin.gif" width="15" height="17" alt=":D" title="Very Happy">D</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Tue Feb 28, 2017 8:31 am</strong></div>
				<div class="author">by <strong>crazymonkey84</strong></div>
				<div class="content">thank you agoinc<br>
<br>
Im a visual studio developer, i have created some small applications for the company i work for. and I´d like to spend some free time creating good scripts to share with the community (as i have no social life at all ahahahahaha)<br>
<br>
<br>
let me get this straigth:<br>
<br>
player= our char<br>
entity = our target<br>
state = buff/debuff<br>
"~= nil" = entity/player exists<br>
"== nill"= entity/player doesnt exist<br>
<br>
"local" = abbreviation for similar situations.... (didn´t get it). Can you please explain it in a more detailed way ?<br>
<br>
---------------------------------------<br>
<br>
<br>
What about "helper"?? Who´s the helper? how does it work? i think i understand it refers to the AS itself but i just dont know for sure<br>
<br>
---------------------------------------<br>
<br>
"Function", works like this??:<br>
<br>
self:desired name (stunned)<br>
	helper:checkexecute("Remove shock")<br>
end<br>
<br>
--------------------------------------------------------------------------------------------------------------------------------------------------<br>
<br>
local Entity = EntityList:GetEntity( Player:GetTargetID()); &lt;----(are we getting the ID number from the target so we can program some actions according to the mob/player/npc we have selected?)<br>
<br>
local EntityState = Entity:GetState(); &lt;----(are we getting the buff/debuff state of our target so we can program a good reaction depending on the target state?)<br>
<br>
local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());  &lt;---(are we getting the distance our target is from us?)<br>
<br>
Entity:GetClass():ToString() == "Assassin, Gladiator, Chanter..." &lt;---( easy to understand, it gets the target class, so we can program some reaction according to buffs or skills our opponent could use)<br>
<br>
Entity:GetName() == "Stormwing" &lt;---(it got the name of the target)<br>
<br>
Player:GetHealthCurrent() &lt; Player:GetHealthMaximum() == / &lt;= / &gt;= 2500 &lt;-(in here we are telling the script to heal us when our maximim health is ??? less or equals, major or equals to 2500??<br>
<br>
-----------------------------------------------------------------<br>
<br>
At this moment all i have done was to open a TeMPLAR.lua and changed the Skills names in a notepad, since it had the very old ones. i made it work anyway.<br>
<br>
Im going to start to read the luas i already have to start to understand in a better way every command/function.<br>
<br>
as 0x00 said in another post, we were all noob at the begining we have to learn, i will try to learn about offsets too.<br>
<br>
Thank you in advance for ur support.<br>
<br>
Regards</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Tue Feb 28, 2017 11:08 am</strong></div>
				<div class="author">by <strong>nucular</strong></div>
				<div class="content"><blockquote><div><cite><a href="memberlist3892.html?mode=viewprofile&amp;u=81">crazymonkey84</a> wrote: <a href="viewtopic1641.html?p=278#p278" data-post-id="278" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">Tue Feb 28, 2017 8:31 am</div></cite>
thank you agoinc<br>
<br>
Im a visual studio developer, i have created some small applications for the company i work for. and I´d like to spend some free time creating good scripts to share with the community (as i have no social life at all ahahahahaha)<br>
<br>
<br>
let me get this straigth:<br>
<br>
player= our char<br>
entity = our target<br>
state = buff/debuff<br>
"~= nil" = entity/player exists<br>
"== nill"= entity/player doesnt exist<br>
<br>
"local" = abbreviation for similar situations.... (didn´t get it). Can you please explain it in a more detailed way ?<br>
<br>
---------------------------------------<br>
<br>
<br>
What about "helper"?? Who´s the helper? how does it work? i think i understand it refers to the AS itself but i just dont know for sure<br>
<br>
---------------------------------------<br>
<br>
"Function", works like this??:<br>
<br>
self:desired name (stunned)<br>
	helper:checkexecute("Remove shock")<br>
end<br>
<br>
--------------------------------------------------------------------------------------------------------------------------------------------------<br>
<br>
local Entity = EntityList:GetEntity( Player:GetTargetID()); &lt;----(are we getting the ID number from the target so we can program some actions according to the mob/player/npc we have selected?)<br>
<br>
local EntityState = Entity:GetState(); &lt;----(are we getting the buff/debuff state of our target so we can program a good reaction depending on the target state?)<br>
<br>
local Range = Player:GetPosition():DistanceToPosition( Entity:GetPosition());  &lt;---(are we getting the distance our target is from us?)<br>
<br>
Entity:GetClass():ToString() == "Assassin, Gladiator, Chanter..." &lt;---( easy to understand, it gets the target class, so we can program some reaction according to buffs or skills our opponent could use)<br>
<br>
Entity:GetName() == "Stormwing" &lt;---(it got the name of the target)<br>
<br>
Player:GetHealthCurrent() &lt; Player:GetHealthMaximum() == / &lt;= / &gt;= 2500 &lt;-(in here we are telling the script to heal us when our maximim health is ??? less or equals, major or equals to 2500??<br>
<br>
-----------------------------------------------------------------<br>
<br>
At this moment all i have done was to open a TeMPLAR.lua and changed the Skills names in a notepad, since it had the very old ones. i made it work anyway.<br>
<br>
Im going to start to read the luas i already have to start to understand in a better way every command/function.<br>
<br>
as 0x00 said in another post, we were all noob at the begining we have to learn, i will try to learn about offsets too.<br>
<br>
Thank you in advance for ur support.<br>
<br>
Regards
</div></blockquote>

Hi crazymonkey, just look inside AionScript Folder and open AionScript.pdf .<br>
It will show you all supported functions and variables.<br>
<br>
As an example maybe to understand how everything works just create inside Scripting Folder lua files like that.<br>
<br>
GellAllBuffStateIds.lua (Shows you all Buffs you have currently up) 
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>function OnLoad
	for ID, BuffSkill in DictionaryOperator ( Player:GetState():GetList() ) do
		Write (ID .. " " .. BuffSkill:GetName() );
	end
end
</code></pre></div>

GellAllAbilites.lua (Shows you all Abilities available) 
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>function OnLoad
	for ID, Skill in DictionaryOperator ( AbilityList:GetList() ) do
		Write (ID .. " " .. Skill:GetName() .. " Cooldown " .. Skill:GetCooldown() );
	end
end
</code></pre></div>

The Player object is static and is always availabe.<br>
Inside the classes lua Attack function "Entity" is the current selected target your bot want's to kill.
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>function Attack (Entity)
 ...
 &lt;&lt; Your attack code for the entity &gt;&gt;
 ...
end
</code></pre></div>

local means the variable only exists inside the function. <a href="https://www.lua.org/pil/4.2.html" class="postlink">https://www.lua.org/pil/4.2.html</a><br>
Helper functions are defined inside Scripting/OfficialGrinderFramework/HelperFunction.lua</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Wed Mar 01, 2017 5:16 am</strong></div>
				<div class="author">by <strong>crazymonkey84</strong></div>
				<div class="content">oh tyvm 4 the explanantion, i started to put all pieces together.<br>
<br>
i think soon ill be sharing some good scripts<br>
<br>
again thank u very much</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Tue Mar 21, 2017 10:13 pm</strong></div>
				<div class="author">by <strong>locatelli</strong></div>
				<div class="content">I'm looking for a really deep lua guide, where I can learn all the returns calls and other advanced commands like string search and so on, if anyone can find a decent one - didn't find one yet sadly - feel free to write me</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Wed Mar 22, 2017 4:27 pm</strong></div>
				<div class="author">by <strong>agonic</strong></div>
				<div class="content"><a href="https://www.lua.org/manual/5.3/" class="postlink">https://www.lua.org/manual/5.3/</a></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Fri Mar 31, 2017 3:32 pm</strong></div>
				<div class="author">by <strong>izanami</strong></div>
				<div class="content">Hi all, i have a little question, how i can obtain and write into console the list of item inside the inventory?<br>
<br>
I'm tring this but id does not work<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>local InventoryLst = InventoryList:GetList();
for i, Inventory in InventoryLst do
  Write(Inventory:GetName() .. " || " .. Inventory:GetAmount());
end</code></pre></div>

i get this error:<br>
attempt to call a userdata value<br>
<br>
Can someone hel me a bit with this list?<br>
if i have write this in an wrong section say me^^</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Basic Lua Knowledge</h3>
				<div class="date">Posted: <strong>Fri Mar 31, 2017 5:22 pm</strong></div>
				<div class="author">by <strong>agonic</strong></div>
				<div class="content"><blockquote><div><cite><a href="memberlista129.html?mode=viewprofile&amp;u=153">izanami</a> wrote: <a href="viewtopicfc9a.html?p=662#p662" data-post-id="662" onclick="if(document.getElementById(hash.substr(1)))href=hash">↑</a><div class="responsive-hide">Fri Mar 31, 2017 3:32 pm</div></cite>
Hi all, i have a little question, how i can obtain and write into console the list of item inside the inventory?<br>
<br>
I'm tring this but id does not work<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>local InventoryLst = InventoryList:GetList();
for i, Inventory in InventoryLst do
  Write(Inventory:GetName() .. " || " .. Inventory:GetAmount());
end</code></pre></div>

i get this error:<br>
attempt to call a userdata value<br>
<br>
Can someone hel me a bit with this list?<br>
if i have write this in an wrong section say me^^
</div></blockquote>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>function OnLoad()
    for Item in ListIterator( InventoryList:GetList() ) do
        Write(""..Item:GetName().."  "..Item:GetAmount())
    end
end</code></pre></div></div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC">UTC</span><br />Page <strong>1</strong> of <strong>2</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from www.nyerk.xyz/viewtopic.php?f=7&t=9&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 May 2018 09:39:20 GMT -->
</html>
